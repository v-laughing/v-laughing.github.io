import{_ as t,c as a,o as i,a4 as r}from"./chunks/framework.DQgBWl2g.js";const p=JSON.parse('{"title":"Vite 原理与实践","description":"","frontmatter":{"title":"Vite 原理与实践"},"headers":[],"relativePath":"cs/web-build/vite.md","filePath":"cs/web-build/vite.md"}'),o={name:"cs/web-build/vite.md"};function n(l,e,s,d,c,u){return i(),a("div",null,[...e[0]||(e[0]=[r('<h1 id="vite-原理与实践" tabindex="-1">Vite 原理与实践 <a class="header-anchor" href="#vite-原理与实践" aria-label="Permalink to &quot;Vite 原理与实践&quot;">​</a></h1><p>Vite（法语意为&quot;快&quot;）是一种新型前端构建工具，旨在显著提升前端开发体验。</p><h2 id="核心原理" tabindex="-1">核心原理 <a class="header-anchor" href="#核心原理" aria-label="Permalink to &quot;核心原理&quot;">​</a></h2><h3 id="_1-开发服务器-基于-native-esm" tabindex="-1">1. 开发服务器：基于 Native ESM <a class="header-anchor" href="#_1-开发服务器-基于-native-esm" aria-label="Permalink to &quot;1. 开发服务器：基于 Native ESM&quot;">​</a></h3><p>传统的打包工具（如 Webpack）在开发服务器启动时，需要先抓取、编译和构建整个应用，然后才能提供服务。</p><p>Vite 采取了不同的策略：</p><ul><li><strong>利用浏览器原生 ES 模块支持</strong>：Vite 在开发环境下直接通过 <code>&lt;script type=&quot;module&quot;&gt;</code> 这种方式让浏览器接管模块加载。</li><li><strong>按需编译</strong>：当浏览器请求某个模块时，Vite 才会对该模块进行转换（编译 Vue/JSX、处理 CSS 等）并返回。这使得启动速度极快，且与应用复杂度无关。</li></ul><h3 id="_2-依赖预构建-dependency-pre-bundling" tabindex="-1">2. 依赖预构建 (Dependency Pre-Bundling) <a class="header-anchor" href="#_2-依赖预构建-dependency-pre-bundling" aria-label="Permalink to &quot;2. 依赖预构建 (Dependency Pre-Bundling)&quot;">​</a></h3><p>为了解决 CommonJS 兼容性和 HTTP 请求过多的问题，Vite 在启动前会使用 <strong>Esbuild</strong> 对依赖进行预构建。</p><ul><li><strong>CommonJS -&gt; ESM</strong>：将 CommonJS/UMD 依赖转换为 ESM。</li><li><strong>Performance</strong>：将许多内部模块的依赖（如 lodash）合并成单个模块，减少 HTTP 请求。</li><li><strong>Speed</strong>：Esbuild 使用 Go 编写，比 JavaScript 编写的打包器快 10-100 倍。</li></ul><h3 id="_3-热更新-hmr" tabindex="-1">3. 热更新 (HMR) <a class="header-anchor" href="#_3-热更新-hmr" aria-label="Permalink to &quot;3. 热更新 (HMR)&quot;">​</a></h3><p>Vite 的 HMR 也是基于 ESM 的。当文件被修改时，Vite 只需要让浏览器重新请求该模块即可，无需像 Webpack 那样重新构建整个 bundle。</p><h3 id="_4-生产构建" tabindex="-1">4. 生产构建 <a class="header-anchor" href="#_4-生产构建" aria-label="Permalink to &quot;4. 生产构建&quot;">​</a></h3><p>尽管原生 ESM 逐渐普及，但在生产环境为了最佳加载性能（Tree Shaking、代码压缩、分块策略），Vite 仍使用 <strong>Rollup</strong> 进行打包。</p>',14)])])}const _=t(o,[["render",n]]);export{p as __pageData,_ as default};
