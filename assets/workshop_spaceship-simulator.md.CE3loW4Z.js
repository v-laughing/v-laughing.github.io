import{t as De,u as ve,G as U,l as H,v as be,m as he,j as Se,w as Ce,g as k,f as oe,V as g,x as Ne,Q as Y,y as Le,p as Q,z as et,D as Pe,e as ie,E as tt,I as xe,J as ot,q as fe,O as qe,K as nt,N as at,B as Ie,F as Ae,i as st,k as it,a as rt,n as Ue,U as ct,s as We,L as lt,r as je,X as Xe,Y as dt,c as ut,d as pt,W as mt,A as ht,o as ft}from"./chunks/three.module.qkk1P2i0.js";import{am as ye,p as ge,c as ee,o as $,j as p,a as B,e as se,t as ae,N as wt,b as gt,w as Ke,T as vt,_ as yt,v as bt,Y as xt,a4 as Te,G as Re,k as de,C as Mt}from"./chunks/framework.DQgBWl2g.js";const St=2e-6,Ye=933e-6,kt=[{name:"太阳",nameEn:"Sun",color:16755251,emissive:16755251,size:2e3,mass:472e11,orbitRadius:0,orbitSpeed:0,rotationSpeed:5e-5,isStar:!0,description:"星系中心，直径4000米"},{name:"余烬孪星",nameEn:"Ember Twin",color:12868666,emissive:10767402,size:171,mass:115e9,orbitRadius:5e3,orbitSpeed:933e-6,rotationSpeed:833e-6,isTwin:!0,twinSide:1,description:"沙漏双星之一，直径342米，公转速度~280m/s，自转周期~126秒"},{name:"灰烬孪星",nameEn:"Ash Twin",color:15259043,emissive:13153667,size:168,mass:106e9,orbitRadius:5e3,orbitSpeed:933e-6,rotationSpeed:.00116,isTwin:!0,twinSide:-1,description:"沙漏双星之一，直径336米，公转速度~280m/s，自转周期~90秒"},{name:"木炉星",nameEn:"Timber Hearth",color:8043130,emissive:5937754,size:250,mass:361e9,orbitRadius:8593,orbitSpeed:419e-6,rotationSpeed:167e-6,description:"地表半径250米，大气175米，公转速度~216m/s，自转周期~628秒",hasAtmosphere:!0,atmosphereColor:8965375,atmosphereThickness:175},{name:"废墟月亮",nameEn:"Attlerock",color:8947848,emissive:4473924,size:75,mass:1e9,moonOf:"木炉星",moonOrbitRadius:600,moonOrbitSpeed:.002,rotationSpeed:.001,description:"木炉星的卫星，无大气"},{name:"脆壳星",nameEn:"Brittle Hollow",color:8035274,emissive:5929898,size:300,mass:334e9,orbitRadius:11691,orbitSpeed:264e-6,rotationSpeed:333e-6,description:"地表半径300米，大气50米，公转速度~185m/s，自转周期~314秒",hasBlackHole:!0,blackHoleSize:53,hasAtmosphere:!0,atmosphereColor:11184810,atmosphereThickness:50},{name:"深巨星",nameEn:"Giant's Deep",color:5085818,emissive:4033130,size:500,mass:289e10,orbitRadius:16458,orbitSpeed:158e-6,rotationSpeed:1e-5,description:"地表半径500米，大气450米，公转速度~156m/s，表面重力2g，潮汐锁定",hasAtmosphere:!0,atmosphereColor:6728328,atmosphereThickness:450,surfaceGravity:2},{name:"黑棘星",nameEn:"Dark Bramble",color:3824202,emissive:2771514,size:750,mass:99e10,orbitRadius:2e4,orbitSpeed:118e-6,rotationSpeed:2e-4,description:"地表半径750米，大气250米，公转速度~141m/s",hasAtmosphere:!0,atmosphereColor:13421772,atmosphereThickness:250},{name:"闯入者",nameEn:"The Interloper",color:8969710,emissive:6732748,size:77.5,mass:1e10,orbitA:18e3,orbitB:8e3,orbitSpeed:32e-5,rotationSpeed:3e-4,isComet:!0,description:"椭圆轨道彗星，直径155米，公转速度50~450m/s"},{name:"量子卫星",nameEn:"Quantum Moon",color:12237546,emissive:10132170,size:120,mass:1e10,moonOrbitRadius:1200,moonOrbitSpeed:8e-4,rotationSpeed:.0015,isQuantum:!0,description:"地表半径120米，浓厚银灰色云雾130米",hasAtmosphere:!0,atmosphereColor:10066346,atmosphereThickness:130}],Ge=["灰烬孪星","脆壳星","深巨星","黑棘星","木炉星"];class Me{constructor(e=Math.random()){this.p=new Uint8Array(256),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let s=0;s<256;s++)this.p[s]=s;let o,n;for(let s=255;s>0;s--)e=e*16807%2147483647,o=e%(s+1),n=this.p[s],this.p[s]=this.p[o],this.p[o]=n;for(let s=0;s<512;s++)this.perm[s]=this.p[s&255],this.permMod12[s]=this.perm[s]%12;this.grad3=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),this.F2=.5*(Math.sqrt(3)-1),this.G2=(3-Math.sqrt(3))/6,this.F3=1/3,this.G3=1/6}noise2D(e,o){const{perm:n,permMod12:s,grad3:i,F2:r,G2:c}=this,a=(e+o)*r,l=Math.floor(e+a),d=Math.floor(o+a),y=(l+d)*c,x=l-y,R=d-y,m=e-x,h=o-R;let u,w;m>h?(u=1,w=0):(u=0,w=1);const M=m-u+c,v=h-w+c,f=m-1+2*c,S=h-1+2*c,b=l&255,A=d&255;let C=0,G=0,I=0,V=.5-m*m-h*h;if(V>=0){const P=s[b+n[A]]*3;V*=V,C=V*V*(i[P]*m+i[P+1]*h)}let D=.5-M*M-v*v;if(D>=0){const P=s[b+u+n[A+w]]*3;D*=D,G=D*D*(i[P]*M+i[P+1]*v)}let z=.5-f*f-S*S;if(z>=0){const P=s[b+1+n[A+1]]*3;z*=z,I=z*z*(i[P]*f+i[P+1]*S)}return 70*(C+G+I)}noise3D(e,o,n){const{perm:s,permMod12:i,grad3:r,F3:c,G3:a}=this,l=(e+o+n)*c,d=Math.floor(e+l),y=Math.floor(o+l),x=Math.floor(n+l),R=(d+y+x)*a,m=d-R,h=y-R,u=x-R,w=e-m,M=o-h,v=n-u;let f,S,b,A,C,G;w>=M?M>=v?(f=1,S=0,b=0,A=1,C=1,G=0):w>=v?(f=1,S=0,b=0,A=1,C=0,G=1):(f=0,S=0,b=1,A=1,C=0,G=1):M<v?(f=0,S=0,b=1,A=0,C=1,G=1):w<v?(f=0,S=1,b=0,A=0,C=1,G=1):(f=0,S=1,b=0,A=1,C=1,G=0);const I=w-f+a,V=M-S+a,D=v-b+a,z=w-A+2*a,P=M-C+2*a,O=v-G+2*a,L=w-1+3*a,F=M-1+3*a,N=v-1+3*a,Z=d&255,T=y&255,_=x&255;let j=0,X=0,J=0,te=0,ne=.6-w*w-M*M-v*v;if(ne>=0){const E=i[Z+s[T+s[_]]]*3;ne*=ne,j=ne*ne*(r[E]*w+r[E+1]*M+r[E+2]*v)}let re=.6-I*I-V*V-D*D;if(re>=0){const E=i[Z+f+s[T+S+s[_+b]]]*3;re*=re,X=re*re*(r[E]*I+r[E+1]*V+r[E+2]*D)}let ce=.6-z*z-P*P-O*O;if(ce>=0){const E=i[Z+A+s[T+C+s[_+G]]]*3;ce*=ce,J=ce*ce*(r[E]*z+r[E+1]*P+r[E+2]*O)}let le=.6-L*L-F*F-N*N;if(le>=0){const E=i[Z+1+s[T+1+s[_+1]]]*3;le*=le,te=le*le*(r[E]*L+r[E+1]*F+r[E+2]*N)}return 32*(j+X+J+te)}}const pe=(t,e,o,n,s=4,i=2,r=.5)=>{let c=0,a=1,l=1,d=0;for(let y=0;y<s;y++)c+=t.noise3D(e*l,o*l,n*l)*a,d+=a,a*=r,l*=i;return c/d},He={木炉星:{seed:12345,resolution:512,baseColors:[{color:[58,120,58],weight:.4},{color:[90,140,70],weight:.3},{color:[120,100,60],weight:.2},{color:[40,80,120],weight:.1}],noiseScale:3,octaves:5,bumpStrength:1.2,hasOcean:!0,oceanLevel:.35,oceanColor:[40,80,120]},余烬孪星:{seed:23456,resolution:512,baseColors:[{color:[196,92,58],weight:.5},{color:[180,70,40],weight:.3},{color:[220,120,60],weight:.2}],noiseScale:4,octaves:4,bumpStrength:1.5,hasLava:!0,lavaColor:[255,100,20]},灰烬孪星:{seed:34567,resolution:512,baseColors:[{color:[232,213,163],weight:.4},{color:[200,180,140],weight:.35},{color:[180,160,120],weight:.25}],noiseScale:5,octaves:4,bumpStrength:.8},脆壳星:{seed:45678,resolution:512,baseColors:[{color:[122,155,202],weight:.4},{color:[90,120,170],weight:.3},{color:[60,80,120],weight:.2},{color:[40,50,80],weight:.1}],noiseScale:4,octaves:5,bumpStrength:1.8,hasCracks:!0,crackColor:[20,10,40]},深巨星:{seed:56789,resolution:512,baseColors:[{color:[77,154,122],weight:.5},{color:[60,130,100],weight:.3},{color:[100,180,140],weight:.2}],noiseScale:2,octaves:6,bumpStrength:.4,isGasGiant:!0,bandColors:[[60,140,100],[80,160,120],[50,120,90]]},黑棘星:{seed:67890,resolution:512,baseColors:[{color:[58,90,74],weight:.5},{color:[40,70,55],weight:.3},{color:[30,50,40],weight:.2}],noiseScale:3,octaves:5,bumpStrength:2,hasBrambles:!0},量子卫星:{seed:78901,resolution:256,baseColors:[{color:[186,186,234],weight:.5},{color:[160,160,210],weight:.3},{color:[140,140,190],weight:.2}],noiseScale:4,octaves:3,bumpStrength:.6,isQuantum:!0},闯入者:{seed:89012,resolution:256,baseColors:[{color:[136,221,238],weight:.6},{color:[180,240,250],weight:.3},{color:[100,200,220],weight:.1}],noiseScale:6,octaves:3,bumpStrength:.5,isIcy:!0},废墟月亮:{seed:90123,resolution:256,baseColors:[{color:[136,136,136],weight:.5},{color:[100,100,100],weight:.3},{color:[80,80,80],weight:.2}],noiseScale:5,octaves:4,bumpStrength:1,hasCraters:!0}},Ct=t=>{if(!t||!t.baseColors||t.baseColors.length===0)return null;const{seed:e,resolution:o,baseColors:n,noiseScale:s,octaves:i,hasOcean:r,oceanLevel:c,oceanColor:a,isGasGiant:l,bandColors:d,hasCracks:y,crackColor:x,hasLava:R,lavaColor:m}=t,h=document.createElement("canvas");h.width=o,h.height=o;const u=h.getContext("2d"),w=u.createImageData(o,o),M=w.data,v=new Me(e),f=new Me(e+1e3);for(let b=0;b<o;b++)for(let A=0;A<o;A++){const C=A/o,G=b/o,I=C*Math.PI*2,V=G*Math.PI,D=Math.sin(V)*Math.cos(I),z=Math.sin(V)*Math.sin(I),P=Math.cos(V);let O=pe(v,D*s,z*s,P*s,i);O=(O+1)*.5;let L,F,N;if(l&&d&&d.length>0){const T=pe(f,D*1.5,z*1.5,P*.5,3)*.3,_=(G+T)*d.length*3%d.length,j=Math.floor(_<0?_+d.length:_),X=d[Math.min(j,d.length-1)],J=O*.3;L=Math.min(255,X[0]+J*50),F=Math.min(255,X[1]+J*50),N=Math.min(255,X[2]+J*30)}else if(r&&a&&O<c){const T=(c-O)/c;L=a[0]*(1-T*.3),F=a[1]*(1-T*.2),N=a[2]*(1+T*.2)}else{let T=0;L=F=N=0,n.forEach((j,X)=>{const J=pe(f,D*(s+X),z*(s+X),P*(s+X),3),te=j.weight*(.5+J*.5);L+=j.color[0]*te,F+=j.color[1]*te,N+=j.color[2]*te,T+=te}),L/=T,F/=T,N/=T;const _=(O-.5)*40;L=Math.max(0,Math.min(255,L+_)),F=Math.max(0,Math.min(255,F+_)),N=Math.max(0,Math.min(255,N+_))}if(y&&x){const T=pe(f,D*8,z*8,P*8,2);if(Math.abs(T)<.08){const _=1-Math.abs(T)/.08;L=L*(1-_)+x[0]*_,F=F*(1-_)+x[1]*_,N=N*(1-_)+x[2]*_}}if(R&&m){const T=pe(f,D*6,z*6,P*6,3);if(T>.5){const _=(T-.5)*2;L=L*(1-_)+m[0]*_,F=F*(1-_)+m[1]*_,N=N*(1-_)+m[2]*_}}const Z=(b*o+A)*4;M[Z]=L,M[Z+1]=F,M[Z+2]=N,M[Z+3]=255}u.putImageData(w,0,0);const S=new De(h);return S.wrapS=ve,S.wrapT=ve,S},Pt=t=>{if(!t)return null;const{seed:e,resolution:o,noiseScale:n,octaves:s,bumpStrength:i,hasCraters:r}=t,c=document.createElement("canvas");c.width=o,c.height=o;const a=c.getContext("2d"),l=a.createImageData(o,o),d=l.data,y=new Me(e),x=new Me(e+500),R=new Float32Array(o*o);for(let u=0;u<o;u++)for(let w=0;w<o;w++){const M=w/o,v=u/o,f=M*Math.PI*2,S=v*Math.PI,b=Math.sin(S)*Math.cos(f),A=Math.sin(S)*Math.sin(f),C=Math.cos(S);let G=pe(y,b*n,A*n,C*n,s);if(r)for(let I=0;I<5;I++){const V=x.noise2D(I*10,0)*.5+.5,D=x.noise2D(0,I*10)*.5+.5,z=.05+x.noise2D(I,I)*.03,P=M-V,O=v-D,L=Math.sqrt(P*P+O*O);if(L<z){const F=(1-L/z)*.5;G-=F*(1-Math.pow(L/z,2))}}R[u*o+w]=G}const m=i*2;for(let u=0;u<o;u++)for(let w=0;w<o;w++){const M=(w-1+o)%o,v=(w+1)%o,f=(u-1+o)%o,S=(u+1)%o,b=R[u*o+M],A=R[u*o+v],C=R[f*o+w],G=R[S*o+w],I=(A-b)*m,V=(G-C)*m;let D=-I,z=-V,P=1;const O=Math.sqrt(D*D+z*z+P*P);D/=O,z/=O,P/=O;const L=(u*o+w)*4;d[L]=Math.floor((D*.5+.5)*255),d[L+1]=Math.floor((z*.5+.5)*255),d[L+2]=Math.floor((P*.5+.5)*255),d[L+3]=255}a.putImageData(l,0,0);const h=new De(c);return h.wrapS=ve,h.wrapT=ve,h},At=t=>{const{seed:e,resolution:o,noiseScale:n,hasOcean:s,oceanLevel:i}=t,r=document.createElement("canvas");r.width=o,r.height=o;const c=r.getContext("2d"),a=c.createImageData(o,o),l=a.data,d=new Me(e+2e3);for(let x=0;x<o;x++)for(let R=0;R<o;R++){const m=R/o,h=x/o,u=m*Math.PI*2,w=h*Math.PI,M=Math.sin(w)*Math.cos(u),v=Math.sin(w)*Math.sin(u),f=Math.cos(w);let S=pe(d,M*n,v*n,f*n,4);S=(S+1)*.5;let b;s&&S<(i||.35)?b=.1+Math.random()*.1:b=.4+S*.4+Math.random()*.1;const A=Math.floor(b*255),C=(x*o+R)*4;l[C]=A,l[C+1]=A,l[C+2]=A,l[C+3]=255}c.putImageData(a,0,0);const y=new De(r);return y.wrapS=ve,y.wrapT=ve,y},Rt=t=>{const e=He[t];if(!e||!e.baseColors)return null;const o=Ct(e),n=Pt(e),s=At(e);return!o||!n?null:{diffuseMap:o,normalMap:n,roughnessMap:s}},_e={vertexShader:`
    varying vec3 vNormal;
    varying vec3 vPosition;
    varying vec3 vWorldPosition;
    
    void main() {
      vNormal = normalize(normalMatrix * normal);
      vPosition = position;
      vec4 worldPosition = modelMatrix * vec4(position, 1.0);
      vWorldPosition = worldPosition.xyz;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
  `,fragmentShader:`
    uniform vec3 glowColor;
    uniform float intensity;
    uniform float power;
    uniform vec3 sunPosition;
    uniform float atmosphereThickness;
    
    varying vec3 vNormal;
    varying vec3 vPosition;
    varying vec3 vWorldPosition;
    
    void main() {
      vec3 viewDirection = normalize(cameraPosition - vWorldPosition);
      float fresnel = pow(1.0 - abs(dot(viewDirection, vNormal)), power);
      
      vec3 sunDir = normalize(sunPosition - vWorldPosition);
      float sunInfluence = max(0.0, dot(vNormal, sunDir));
      float backScatter = pow(max(0.0, dot(-viewDirection, sunDir)), 3.0) * 0.3;
      
      float totalIntensity = intensity * fresnel * (0.6 + sunInfluence * 0.4 + backScatter);
      
      vec3 finalColor = glowColor * totalIntensity;
      float alpha = fresnel * intensity * 0.8;
      
      gl_FragColor = vec4(finalColor, alpha);
    }
  `},Dt=(t,e)=>{const{color:o=8965375,thickness:n=50,intensity:s=1,power:i=2.5,layers:r=2}=e,c=new U,a=new Ce(o);for(let d=0;d<r;d++){const y=t+n*(.3+d/r*.7),x=s*(1-d*.3),R=i+d*.5,m=new H(y,48,48),h=new be({vertexShader:_e.vertexShader,fragmentShader:_e.fragmentShader,uniforms:{glowColor:{value:a},intensity:{value:x},power:{value:R},sunPosition:{value:new g(0,0,0)},atmosphereThickness:{value:n}},transparent:!0,blending:Se,side:he,depthWrite:!1}),u=new k(m,h);u.userData.isAtmosphereLayer=!0,c.add(u)}const l=zt(t,a,s);return c.add(l),c},zt=(t,e,o)=>{const n=new H(t*1.02,48,48),s=new be({vertexShader:`
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        vNormal = normalize(normalMatrix * normal);
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        vViewPosition = -mvPosition.xyz;
        gl_Position = projectionMatrix * mvPosition;
      }
    `,fragmentShader:`
      uniform vec3 glowColor;
      uniform float intensity;
      
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        vec3 viewDir = normalize(vViewPosition);
        float rim = 1.0 - max(0.0, dot(viewDir, vNormal));
        rim = pow(rim, 3.0);
        
        vec3 finalColor = glowColor * rim * intensity * 0.5;
        float alpha = rim * intensity * 0.4;
        
        gl_FragColor = vec4(finalColor, alpha);
      }
    `,uniforms:{glowColor:{value:e},intensity:{value:o}},transparent:!0,blending:Se,side:Ne,depthWrite:!1});return new k(n,s)},Vt=(t,e)=>{t.children.forEach(o=>{o.material&&o.material.uniforms&&o.material.uniforms.sunPosition&&o.material.uniforms.sunPosition.value.copy(e)})},Gt={木炉星:{color:8965375,thickness:175,intensity:.8,power:2,layers:3},脆壳星:{color:10066363,thickness:50,intensity:.5,power:2.5,layers:2},深巨星:{color:6728328,thickness:450,intensity:1.2,power:1.8,layers:4},黑棘星:{color:11189162,thickness:250,intensity:.6,power:2.2,layers:2},量子卫星:{color:13421823,thickness:130,intensity:.7,power:2,layers:2}},Oe={vertexShader:`
    varying vec2 vUv;
    varying vec3 vNormal;
    varying vec3 vViewPosition;
    
    void main() {
      vUv = uv;
      vNormal = normalize(normalMatrix * normal);
      vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
      vViewPosition = -mvPosition.xyz;
      gl_Position = projectionMatrix * mvPosition;
    }
  `,fragmentShader:`
    uniform float time;
    uniform vec3 color1;
    uniform vec3 color2;
    
    varying vec2 vUv;
    varying vec3 vNormal;
    varying vec3 vViewPosition;
    
    float noise(vec2 p) {
      return fract(sin(dot(p, vec2(12.9898, 78.233))) * 43758.5453);
    }
    
    void main() {
      vec3 viewDir = normalize(vViewPosition);
      float rim = 1.0 - max(0.0, dot(viewDir, vNormal));
      rim = pow(rim, 1.5);
      
      float flicker = 0.8 + 0.2 * sin(time * 3.0 + vUv.x * 10.0) * sin(time * 2.0 + vUv.y * 8.0);
      float noise1 = noise(vUv * 20.0 + time * 0.5);
      
      vec3 finalColor = mix(color1, color2, rim) * (1.0 + noise1 * 0.2) * flicker;
      float alpha = rim * 0.8;
      
      gl_FragColor = vec4(finalColor, alpha);
    }
  `},Lt=t=>{const e=new U,o=new H(t*1.15,64,64),n=new be({vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader,uniforms:{time:{value:0},color1:{value:new Ce(16755251)},color2:{value:new Ce(16737792)}},transparent:!0,blending:Se,side:he,depthWrite:!1});e.add(new k(o,n));const s=new H(t*1.4,32,32),i=new oe({color:16729088,transparent:!0,opacity:.15,side:he});e.add(new k(s,i));const r=new H(t*2,32,32),c=new oe({color:16720384,transparent:!0,opacity:.05,side:he});return e.add(new k(r,c)),e},It=(t,e)=>{t.children.forEach(o=>{o.material&&o.material.uniforms&&o.material.uniforms.time&&(o.material.uniforms.time.value=e)})},Et=(t,e=6710886)=>{const o=new at(t,0),n=new Q({color:e,roughness:.9,metalness:.1});return new k(o,n)},Tt=(t,e,o=4863784,n=2972199)=>{const s=new U,i=new ie(t*.1,t*.15,t,6),r=new Q({color:o,roughness:.9}),c=new k(i,r);c.position.y=t/2,s.add(c);const a=new nt(e,1),l=new Q({color:n,roughness:.8}),d=new k(a,l);return d.position.y=t+e*.5,s.add(d),s},_t=(t,e,o,n=9139029)=>{const s=new U,i=new xe(t,e,o),r=new Q({color:n,roughness:.7}),c=new k(i,r);c.position.y=e/2,s.add(c);const a=new fe(t*.8,e*.4,4),l=new Q({color:5917242,roughness:.8}),d=new k(a,l);return d.position.y=e+e*.2,d.rotation.y=Math.PI/4,s.add(d),s},Ot=(t,e=8943462)=>{const o=new U,n=new xe(t*.3,t*.1,t*.3),s=new Q({color:e,roughness:.6}),i=new k(n,s);i.position.y=t*.05,o.add(i);const r=new xe(t*.15,t*.8,t*.15),c=new k(r,s);c.position.y=t*.5,o.add(c);const a=new qe(t*.12,0),l=new Q({color:11193599,emissive:4482730,emissiveIntensity:.5,roughness:.3}),d=new k(a,l);return d.position.y=t*.95,o.add(d),o},Qt=(t,e=12888194)=>{const o=new U,n=new ie(t*.15,t*.2,t,8),s=new Q({color:e,roughness:.7}),i=new k(n,s);i.position.y=t/2,o.add(i);const r=new fe(t*.2,t*.3,8),c=new k(r,s);return c.position.y=t+t*.15,o.add(c),o},Ft=(t,e=8969727)=>{const o=new U,n=new qe(t,0),s=new Q({color:e,emissive:e,emissiveIntensity:.3,roughness:.2,metalness:.8,transparent:!0,opacity:.8}),i=new k(n,s);return i.scale.y=2,o.add(i),o},Bt=(t,e=2771514)=>{const o=new U,n=new fe(t*.3,t,5),s=new Q({color:e,roughness:.8}),i=new k(n,s);i.position.y=t/2,o.add(i);for(let r=0;r<3;r++){const c=new fe(t*.15,t*.5,4),a=new k(c,s);a.position.y=t*.3,a.position.x=Math.cos(r*Math.PI*2/3)*t*.2,a.position.z=Math.sin(r*Math.PI*2/3)*t*.2,a.rotation.z=Math.PI/6*(r%2===0?1:-1),o.add(a)}return o},Nt=t=>{const e=new U,o=new H(t,16,16),n=new Q({color:11206570,emissive:6750054,emissiveIntensity:.8,roughness:.3}),s=new k(o,n);e.add(s);const i=new H(t*2,16,16),r=new oe({color:4521796,transparent:!0,opacity:.2}),c=new k(i,r);return e.add(c),e},qt=t=>{const e=new U,o=new ot(t,0),n=new Q({color:13421806,emissive:8947882,emissiveIntensity:.4,roughness:.4,metalness:.6}),s=new k(o,n);return s.rotation.set(Math.random(),Math.random(),Math.random()),e.add(s),e},Ut=(t,e=8943462)=>{const o=new U;for(let r=0;r<4;r++){const c=t*(.5+Math.random()*.5),a=new ie(t*.1,t*.12,c,6),l=new Q({color:e,roughness:.8}),d=new k(a,l);d.position.x=Math.cos(r*Math.PI/2)*t*.4,d.position.z=Math.sin(r*Math.PI/2)*t*.4,d.position.y=c/2,o.add(d)}const n=new xe(t,t*.1,t),s=new Q({color:e,roughness:.8}),i=new k(n,s);return i.position.y=t*.05,o.add(i),o},Wt=t=>{const e=new U,o=new ie(t,t,t*.1,16),n=new Q({color:5592405,roughness:.5,metalness:.3}),s=new k(o,n);s.position.y=t*.05,e.add(s);const i=new Le(t*.8,t*.05,8,32),r=new Q({color:16755200,emissive:16746496,emissiveIntensity:.3}),c=new k(i,r);return c.rotation.x=Math.PI/2,c.position.y=t*.12,e.add(c),e},jt=t=>{const e=new U,o=new ie(t*.3,t*.4,t*.2,8),n=new Q({color:4473924,roughness:.5,metalness:.5}),s=new k(o,n);s.position.y=t*.1,e.add(s);const i=new ie(t*.1,t*.15,t*.8,8),r=new Q({color:6710886,roughness:.4,metalness:.6}),c=new k(i,r);return c.position.y=t*.5,c.rotation.x=Math.PI/6,e.add(c),e},Xt=t=>{const e=new U,o=new ie(t*.05,t*.05,t,8),n=new Q({color:9127187}),s=new k(o,n);s.position.y=t/2,e.add(s);const i=new tt(t*.4,t*.25),r=new Q({color:5085818,side:Pe,emissive:2976330,emissiveIntensity:.2}),c=new k(i,r);return c.position.y=t*.85,c.position.x=t*.2,e.add(c),e},Kt=t=>{const e=new U,o=new Le(t,t*.2,8,16),n=new Q({color:5592405,roughness:.9}),s=new k(o,n);return s.rotation.x=Math.PI/2,e.add(s),e},Yt=t=>{const e=new U,o=new Le(t,t*.1,8,32),n=new Q({color:12888194,roughness:.5,metalness:.3}),s=new k(o,n);s.rotation.x=Math.PI/2,s.position.y=t,e.add(s);const i=new et(t*.85,32),r=new oe({color:4482730,transparent:!0,opacity:.5,side:Pe}),c=new k(i,r);c.rotation.x=Math.PI/2,c.position.y=t,e.add(c);const a=new ie(t*.15,t*.2,t*.3,8),l=new k(a,n);return l.position.y=t*.15,e.add(l),e},$e={余烬孪星:{landmarks:[{type:"ruin",count:3,sizeRange:[8,15],color:10518624},{type:"obelisk",count:5,sizeRange:[6,12]},{type:"rock",count:20,sizeRange:[2,6],color:12868666}]},灰烬孪星:{landmarks:[{type:"tower",count:4,sizeRange:[10,20],color:13943970},{type:"portal",count:2,sizeRange:[5,8]},{type:"rock",count:15,sizeRange:[2,5],color:15259043}]},木炉星:{landmarks:[{type:"building",count:8,sizeRange:[4,8]},{type:"tree",count:25,sizeRange:[5,12]},{type:"launchPad",count:1,sizeRange:[6,6]},{type:"telescope",count:2,sizeRange:[4,6]},{type:"rock",count:15,sizeRange:[1,4]}]},废墟月亮:{landmarks:[{type:"crater",count:5,sizeRange:[3,8]},{type:"ruin",count:2,sizeRange:[5,10],color:6710886},{type:"rock",count:20,sizeRange:[1,4],color:8947848}]},脆壳星:{landmarks:[{type:"tower",count:3,sizeRange:[12,18],color:9087690},{type:"ruin",count:4,sizeRange:[8,14],color:8035274},{type:"crystal",count:8,sizeRange:[3,7],color:6719692},{type:"rock",count:15,sizeRange:[2,5],color:5929898}]},深巨星:{landmarks:[{type:"islandMarker",count:6,sizeRange:[8,12]},{type:"tower",count:2,sizeRange:[15,25],color:6138506},{type:"rock",count:10,sizeRange:[3,8],color:5085818}]},黑棘星:{landmarks:[{type:"thorn",count:30,sizeRange:[8,20]},{type:"glowingSeed",count:15,sizeRange:[1,3]},{type:"rock",count:10,sizeRange:[3,8],color:3824202}]},闯入者:{landmarks:[{type:"crystal",count:12,sizeRange:[2,6],color:11202303},{type:"rock",count:10,sizeRange:[1,4],color:8969710}]},量子卫星:{landmarks:[{type:"quantumShard",count:20,sizeRange:[2,5]},{type:"obelisk",count:3,sizeRange:[5,10]},{type:"rock",count:10,sizeRange:[1,4],color:12237546}]}},Ht={rock:(t,e)=>Et(t,e),tree:t=>Tt(t,t*.6),building:t=>_t(t,t*1.5,t),obelisk:t=>Ot(t),tower:(t,e)=>Qt(t,e),crystal:(t,e)=>Ft(t,e),thorn:t=>Bt(t),glowingSeed:t=>Nt(t),quantumShard:t=>qt(t),ruin:(t,e)=>Ut(t,e),launchPad:t=>Wt(t),telescope:t=>jt(t),islandMarker:t=>Xt(t),crater:t=>Kt(t),portal:t=>Yt(t)},$t=(t,e,o)=>{const n=$e[t];if(!n)return;let s=0;for(let r=0;r<t.length;r++)s+=t.charCodeAt(r);const i=()=>{const r=Math.sin(s++)*1e4;return r-Math.floor(r)};n.landmarks.forEach(r=>{const{type:c,count:a,sizeRange:l,color:d}=r,y=Ht[c];if(y)for(let x=0;x<a;x++){const R=l[0]+i()*(l[1]-l[0]),m=y(R,d),h=i()*Math.PI*2,u=Math.acos(2*i()-1),w=Math.sin(u)*Math.cos(h),M=Math.sin(u)*Math.sin(h),v=Math.cos(u),f=new g(w,M,v).multiplyScalar(e);m.position.copy(f);const S=f.clone().normalize(),b=new g(0,1,0),A=new Y().setFromUnitVectors(b,S);m.quaternion.copy(A),m.rotateY(i()*Math.PI*2),o.add(m)}})},Zt=()=>{const t=document.createElement("canvas");t.width=64,t.height=64;const e=t.getContext("2d"),o=e.createRadialGradient(32,32,0,32,32,32);return o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(.15,"rgba(255, 255, 255, 1)"),o.addColorStop(.3,"rgba(255, 255, 255, 0.8)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.4)"),o.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=o,e.fillRect(0,0,64,64),new De(t)},Jt=()=>{const t=new Ie,e=[],o=[];for(let s=0;s<15e3;s++){const i=4e4+Math.random()*5e4,r=Math.random()*Math.PI*2,c=Math.acos(2*Math.random()-1);e.push(i*Math.sin(c)*Math.cos(r),i*Math.sin(c)*Math.sin(r),i*Math.cos(c));const a=Math.random();a<.1?o.push(1,.9,.7):a<.2?o.push(.85,.95,1):o.push(1,1,1)}t.setAttribute("position",new Ae(e,3)),t.setAttribute("color",new Ae(o,3));const n=new st({size:2.5,map:Zt(),vertexColors:!0,transparent:!0,opacity:1,sizeAttenuation:!0,depthWrite:!1,blending:Se});return new it(t,n)},eo=t=>{const e=new U,o=t.name==="木炉星"?0:Math.random()*Math.PI*2;e.userData={...t,angle:o};const n=t.isStar||He[t.name]?64:32,s=new H(t.size,n,n);let i;if(t.isStar)i=new oe({color:t.color});else{const a=Rt(t.name);a?i=new Q({map:a.diffuseMap,normalMap:a.normalMap,normalScale:new rt(1.5,1.5),roughnessMap:a.roughnessMap,roughness:.7,metalness:.1,emissive:new Ce(t.emissive),emissiveIntensity:.15}):i=new Q({color:t.color,emissive:t.emissive,emissiveIntensity:.4,roughness:.6,metalness:.2})}const r=new k(s,i);if(e.add(r),e.userData.mesh=r,!t.isStar){const a=new U;$e[t.name]&&$t(t.name,t.size,a),r.add(a)}let c=null;if(t.isStar){c=Lt(t.size),e.add(c);const a=new Ue(16768392,3,5e4);e.add(a)}if(t.hasAtmosphere&&t.atmosphereThickness){const a=Gt[t.name];if(a){const l=Dt(t.size,a);l.userData.isAtmosphere=!0,e.add(l),e.userData.atmosphere=l}else{const l=t.size+t.atmosphereThickness,d=new H(l,48,48),y=new oe({color:t.atmosphereColor,transparent:!0,opacity:.12,side:he});e.add(new k(d,y))}}if(t.hasBlackHole){const a=t.blackHoleSize||t.size*.15,l=new H(a,32,32),d=new oe({color:0}),y=new k(l,d);y.position.set(0,0,0),e.add(y);const x=new ct(a*1.2,a*2.5,64),R=new be({vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        varying vec2 vUv;
        void main() {
          float dist = length(vUv - 0.5) * 2.0;
          float alpha = smoothstep(0.0, 0.5, dist) * smoothstep(1.0, 0.6, dist);
          vec3 color = mix(vec3(0.5, 0.3, 1.0), vec3(0.2, 0.1, 0.5), dist);
          gl_FragColor = vec4(color, alpha * 0.7);
        }
      `,transparent:!0,side:Pe,depthWrite:!1,blending:Se}),m=new k(x,R);m.rotation.x=Math.PI/2,e.add(m);const h=new H(a*1.8,32,32),u=new oe({color:4465322,transparent:!0,opacity:.25,side:he});e.add(new k(h,u))}if(t.isComet){const a=new fe(t.size*.6,t.size*5,8),l=new oe({color:6741503,transparent:!0,opacity:.3,side:Pe}),d=new k(a,l);d.rotation.x=Math.PI/2,d.position.z=t.size*2.5,e.add(d),e.userData.tail=d}if(t.isQuantum){const a=t.size+(t.atmosphereThickness||130),l=new H(a,48,48),d=new be({vertexShader:`
        varying vec3 vNormal;
        varying vec3 vViewPosition;
        void main() {
          vNormal = normalize(normalMatrix * normal);
          vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
          vViewPosition = -mvPosition.xyz;
          gl_Position = projectionMatrix * mvPosition;
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying vec3 vViewPosition;
        void main() {
          vec3 viewDir = normalize(vViewPosition);
          float rim = 1.0 - abs(dot(viewDir, vNormal));
          float density = 0.85 + rim * 0.15;
          vec3 fogColor = vec3(0.35, 0.35, 0.4);
          gl_FragColor = vec4(fogColor, density);
        }
      `,transparent:!0,side:Ne,depthWrite:!1}),y=new k(l,d);e.add(y);const x=new H(t.size*1.05,32,32),R=new oe({color:4473941,transparent:!0,opacity:.95});e.add(new k(x,R));const m=new H(a*1.08,32,32),h=new oe({color:5592422,transparent:!0,opacity:.1,side:he});e.add(new k(m,h))}return{group:e,sunCoronaGroup:c}},Qe=(t,e=!1)=>{const n=new Ie,s=[];for(let c=0;c<=128;c++){const a=c/128*Math.PI*2;s.push(Math.cos(a)*t,0,Math.sin(a)*t)}n.setAttribute("position",new Ae(s,3));const i=e?new We({color:4478310,transparent:!0,opacity:.3,dashSize:2,gapSize:1}):new lt({color:3359829,transparent:!0,opacity:.25}),r=new je(n,i);return e&&r.computeLineDistances(),r},to=(t,e)=>{const n=new Ie,s=[],i=Math.sqrt(t*t-e*e);for(let a=0;a<=128;a++){const l=a/128*Math.PI*2;s.push(Math.cos(l)*t-i,0,Math.sin(l)*e)}n.setAttribute("position",new Ae(s,3));const r=new We({color:4491434,transparent:!0,opacity:.35,dashSize:1.5,gapSize:1}),c=new je(n,r);return c.computeLineDistances(),c},oo=t=>{const e=new U,o=new fe(1.5,6,8),n=new Q({color:13404228,emissive:4465169,emissiveIntensity:.3,roughness:.4,metalness:.6}),s=new k(o,n);s.rotation.x=Math.PI/2,e.add(s);const i=new xe(8,.3,2),r=new Q({color:8939059,roughness:.5,metalness:.4}),c=new k(i,r);c.position.z=1,e.add(c);const a=new H(1,16,16,0,Math.PI*2,0,Math.PI/2),l=new Q({color:8965375,transparent:!0,opacity:.7,roughness:.1,metalness:.8}),d=new k(a,l);d.rotation.x=-Math.PI/2,d.position.z=-1.5,e.add(d);const y=new ie(.8,1,1.5,8),x=new Q({color:4473924,roughness:.3,metalness:.8}),R=new k(y,x);R.rotation.x=Math.PI/2,R.position.z=3.5,e.add(R);const m=(w,M,v=1)=>{const f=new fe(.5*v,2*v,8),S=new oe({color:16737792,transparent:!0,opacity:0,depthTest:!1}),b=new k(f,S);return b.position.copy(w),b.rotation.set(M.x,M.y,M.z),b.renderOrder=999,e.add(b),b},h={back:m(new g(0,0,5),new g(-Math.PI/2,0,0),1.2),front:m(new g(0,0,-4),new g(Math.PI/2,0,0),.8),left:m(new g(2,0,0),new g(0,0,Math.PI/2),.6),right:m(new g(-2,0,0),new g(0,0,-Math.PI/2),.6),bottom:m(new g(0,2,1),new g(0,0,0),.6),top:m(new g(0,-2,1),new g(Math.PI,0,0),.6)};e.userData.thrusters=h;const u=new Ue(16777130,.5,50);return u.position.set(0,0,-2.5),e.add(u),e.position.copy(t),e},Fe=(t,e)=>{const o=t==null?void 0:t.userData.thrusters;if(!o)return;const n=.8+Math.random()*.4;o.back.material.opacity=e.forward?.9:0,e.forward&&(o.back.scale.y=n),o.front.material.opacity=e.backward?.8:0,e.backward&&(o.front.scale.y=n),o.left.material.opacity=e.left?.7:0,e.left&&(o.left.scale.y=n),o.right.material.opacity=e.right?.7:0,e.right&&(o.right.scale.y=n),o.top.material.opacity=e.up?.7:0,e.up&&(o.top.scale.y=n),o.bottom.material.opacity=e.down?.7:0,e.down&&(o.bottom.scale.y=n)},no=(t,e)=>{const o=new g;return e.forEach(n=>{const s=n.userData;if(!s.mass)return;const i=new g().subVectors(n.position,t),r=i.length();if(r<s.size)return;const c=St*s.mass/(r*r);i.normalize().multiplyScalar(c),o.add(i)}),o},ze=(t,e)=>{let o=null,n=1/0;return e.forEach(s=>{const i=s.userData;if(i.isStar)return;const r=t.distanceTo(s.position)-i.size;r<n&&(n=r,o=s)}),{body:o,distance:n}},me=(t,e,o)=>{const n=t.userData;if(n.isStar)return new g(0,0,0);const s=t.position.clone(),i=.016;let r,c;if(n.isComet&&n.orbitA&&n.orbitB){const a=Math.sqrt(n.orbitA*n.orbitA-n.orbitB*n.orbitB),l=n.angle+n.orbitSpeed*i*60;r=Math.cos(l)*n.orbitA-a,c=Math.sin(l)*n.orbitB}else if(n.isTwin){const a=o+Ye*i*60,l=Math.cos(a)*n.orbitRadius,d=Math.sin(a)*n.orbitRadius,y=400,x=a*10;r=l+Math.cos(x)*y*n.twinSide,c=d+Math.sin(x)*y*n.twinSide}else if(n.moonOf){const a=e.find(l=>l.userData.name===n.moonOf);if(a){const l=me(a,e,o),d=(n.moonAngle||0)+n.moonOrbitSpeed*i*60,y=-Math.sin(d)*n.moonOrbitRadius*n.moonOrbitSpeed*60,x=Math.cos(d)*n.moonOrbitRadius*n.moonOrbitSpeed*60;return new g(l.x+y,0,l.z+x)}return new g(0,0,0)}else if(n.orbitRadius){const a=n.angle+n.orbitSpeed*i*60;r=Math.cos(a)*n.orbitRadius,c=Math.sin(a)*n.orbitRadius}else return new g(0,0,0);return new g((r-s.x)/i,0,(c-s.z)/i)},Be=(t,e,o,n,s)=>{let i=o+Ye*t*60,r=s;return e.forEach(c=>{const a=c.userData;if(a.isQuantum){const l=Ge[n],d=e.find(y=>y.userData.name===l);d&&(r+=a.moonOrbitSpeed*t*60,c.position.x=d.position.x+Math.cos(r)*a.moonOrbitRadius,c.position.y=Math.sin(r)*a.moonOrbitRadius*.3,c.position.z=d.position.z+Math.sin(r)*a.moonOrbitRadius);return}if(a.moonOf){const l=e.find(d=>d.userData.name===a.moonOf);l&&(a.moonAngle=(a.moonAngle||0)+a.moonOrbitSpeed*t*60,c.position.x=l.position.x+Math.cos(a.moonAngle)*a.moonOrbitRadius,c.position.y=Math.sin(a.moonAngle)*a.moonOrbitRadius*.2,c.position.z=l.position.z+Math.sin(a.moonAngle)*a.moonOrbitRadius);return}if(a.orbitRadius>0||a.isComet)if(a.angle+=a.orbitSpeed*t*60,a.isComet&&a.orbitA&&a.orbitB){const l=Math.sqrt(a.orbitA*a.orbitA-a.orbitB*a.orbitB);if(c.position.x=Math.cos(a.angle)*a.orbitA-l,c.position.z=Math.sin(a.angle)*a.orbitB,a.tail){const d=a.orbitA*Math.sin(a.angle),y=-a.orbitB*Math.cos(a.angle);c.rotation.y=Math.atan2(d,y)}}else if(a.isTwin){const l=Math.cos(i)*a.orbitRadius,d=Math.sin(i)*a.orbitRadius,y=400,x=i*10;c.position.x=l+Math.cos(x)*y*a.twinSide,c.position.z=d+Math.sin(x)*y*a.twinSide}else c.position.x=Math.cos(a.angle)*a.orbitRadius,c.position.z=Math.sin(a.angle)*a.orbitRadius;a.mesh&&a.rotationSpeed&&(a.mesh.rotation.y+=a.rotationSpeed*t*60)}),{twinSystemAngle:i,quantumAngle:r}};let Ve=0;const ao=t=>{const e=ye({position:new g().copy(t),velocity:new g(0,0,0),rotation:new Xe(0,0,0),thrust:25,rotationSpeed:1.5,maxSpeed:500,fuel:100,isLanded:!1,landedOn:null,landedLocalDir:null,landedLocalQuaternion:new Y,isMatchingVelocity:!1,targetVelocity:new g(0,0,0),matchingTarget:null,initialVelocityDiff:0}),o=ye({forward:!1,backward:!1,left:!1,right:!1,up:!1,down:!1,rollLeft:!1,rollRight:!1,pitchUp:!1,pitchDown:!1,boost:!1,matchVelocity:!1}),n=ye({speed:0,altitude:0,nearestBody:null,nearestDistance:0,isThrusting:!1,isMatchingVelocity:!1,matchingProgress:0}),s=ge("first");let i=null;const r=m=>{i=m},c=(m,h)=>{if(e.isMatchingVelocity){e.isMatchingVelocity=!1,e.matchingTarget=null,e.initialVelocityDiff=0;return}const u=ze(e.position,m);u.body&&(e.isMatchingVelocity=!0,e.matchingTarget=u.body,e.targetVelocity.copy(me(u.body,m,h)),e.initialVelocityDiff=new g().subVectors(e.targetVelocity,e.velocity).length())},a=(m,h,u)=>{if(!e.isMatchingVelocity||!e.matchingTarget)return;const w=me(e.matchingTarget,h,u);e.targetVelocity.copy(w);const M=new g().subVectors(e.targetVelocity,e.velocity),v=M.length();if(v<.5){e.velocity.copy(e.targetVelocity),e.isMatchingVelocity=!1,e.matchingTarget=null;return}const S=25*m;if(v<=S)e.velocity.copy(e.targetVelocity);else{const b=M.normalize().multiplyScalar(S);e.velocity.add(b)}n.matchingProgress=(1-v/e.initialVelocityDiff)*100},l=(m,h)=>{if(!e.isLanded||!e.landedOn)return;const u=e.landedOn,w=new g().subVectors(e.position,u.position).normalize(),M=me(u,m,h);e.velocity.copy(M).add(w.multiplyScalar(2));const v=u.userData.rotationSpeed||0,f=u.userData.size+.5,S=new g(0,1,0),b=new g(w.x,0,w.z);if(b.lengthSq()>.001){b.normalize();const A=new g().crossVectors(S,b).normalize(),G=Math.sqrt(w.x*w.x+w.z*w.z)*f*v;e.velocity.add(A.multiplyScalar(G))}e.isLanded=!1,e.landedOn=null,e.landedLocalDir=null};return{ship:e,controls:o,hud:n,viewMode:s,setShipMesh:r,matchVelocityWithNearest:c,launch:l,updateShip:(m,h,u)=>{var I;if(Ve=u,e.isLanded&&e.landedOn){const V=e.landedOn,D=V.userData.mesh,z=D?D.rotation.y:0,P=new Y().setFromAxisAngle(new g(0,1,0),z),O=e.landedLocalDir.clone().applyQuaternion(P);e.position.copy(V.position).add(O.multiplyScalar(V.userData.size+.5));const L=P.clone().multiply(e.landedLocalQuaternion);if(e.rotation.setFromQuaternion(L),n.speed="0",n.altitude="0",o.forward||o.backward||o.left||o.right){const F=7*(o.boost?3:1)*m,N=(o.forward?1:0)-(o.backward?1:0),Z=(o.right?1:0)-(o.left?1:0),T=new g(0,0,-1).applyQuaternion(e.landedLocalQuaternion),_=new g(1,0,0).applyQuaternion(e.landedLocalQuaternion),j=new g().addScaledVector(T,N).addScaledVector(_,Z).normalize();if(j.lengthSq()>.001){const X=e.landedLocalDir.clone().normalize(),J=new g().crossVectors(X,j).normalize(),te=F/(V.userData.size+.5),ne=new Y().setFromAxisAngle(J,te);e.landedLocalDir.applyQuaternion(ne),e.landedLocalQuaternion.premultiply(ne)}}o.up&&l(h,u),i&&(i.position.copy(e.position),i.rotation.copy(e.rotation),Fe(i,o));return}const w=new Y().setFromEuler(e.rotation),M=new g(0,0,-1).applyQuaternion(w),v=new g(1,0,0).applyQuaternion(w),f=new g(0,1,0).applyQuaternion(w),S=o.boost?2.5:1;o.forward&&e.velocity.add(M.clone().multiplyScalar(e.thrust*S*m)),o.backward&&e.velocity.add(M.clone().multiplyScalar(-e.thrust*.5*m)),o.left&&e.velocity.add(v.clone().multiplyScalar(-e.thrust*.5*m)),o.right&&e.velocity.add(v.clone().multiplyScalar(e.thrust*.5*m)),o.up&&e.velocity.add(f.clone().multiplyScalar(e.thrust*.5*m)),o.down&&e.velocity.add(f.clone().multiplyScalar(-e.thrust*.5*m));const b=no(e.position,h);e.velocity.add(b.multiplyScalar(m)),a(m,h,u),e.velocity.length()>e.maxSpeed&&e.velocity.normalize().multiplyScalar(e.maxSpeed),e.position.add(e.velocity.clone().multiplyScalar(m)),i&&(i.position.copy(e.position),i.rotation.copy(e.rotation),Fe(i,o));const C=ze(e.position,h);let G=e.velocity.length();if(C.body){const V=me(C.body,h,Ve);G=new g().subVectors(e.velocity,V).length()}if(n.speed=G.toFixed(0),n.nearestBody=((I=C.body)==null?void 0:I.userData.name)||null,n.nearestDistance=C.distance.toFixed(0),n.altitude=C.distance.toFixed(0),n.isThrusting=o.forward||o.backward||o.left||o.right||o.up||o.down,n.isMatchingVelocity=e.isMatchingVelocity,C.distance<.5&&C.body){e.isLanded=!0,e.landedOn=C.body,e.isMatchingVelocity=!1,e.matchingTarget=null,e.initialVelocityDiff=0;const V=C.body.userData.mesh?C.body.userData.mesh.rotation.y:0;e.landedLocalDir=new g().subVectors(e.position,C.body.position).normalize(),e.landedLocalDir.applyAxisAngle(new g(0,1,0),-V);const D=new Y().setFromEuler(e.rotation),z=new Y().setFromAxisAngle(new g(0,1,0),V);e.landedLocalQuaternion.copy(z.invert().multiply(D));const P=me(C.body,h,Ve);e.velocity.copy(P)}},updateCamera:(m,h)=>{const u=new Y;u.setFromEuler(e.rotation),new g(0,0,-1).applyQuaternion(u);const w=new g(0,1,0).applyQuaternion(u),M=new g(0,0,1).applyQuaternion(u);if(s.value==="first")m.position.copy(e.position),m.quaternion.copy(u),i&&(i.visible=!1);else if(s.value==="third"){const v=M.clone().multiplyScalar(40).add(w.clone().multiplyScalar(15));m.position.copy(e.position).add(v),m.lookAt(e.position),i&&(i.visible=!0)}else if(s.value==="orbit"){const v=ze(e.position,h);if(v.body){const f=v.body.position.clone(),S=new g().subVectors(e.position,f).normalize();m.position.copy(f).add(S.multiplyScalar(v.body.userData.size*4+10)),m.lookAt(e.position),i&&(i.visible=!0)}}},handleMouseMove:(m,h)=>{if(!h)return;const u=.002;if(e.isLanded&&e.landedOn){const f=e.landedLocalDir.clone().normalize(),S=new g(0,0,-1).applyQuaternion(e.landedLocalQuaternion);let b=new g().crossVectors(S,f).normalize();if(b.lengthSq()<.001){const I=new g(0,1,0).applyQuaternion(e.landedLocalQuaternion);b=new g().crossVectors(I,f).normalize()}const A=new Y().setFromAxisAngle(f,-m.movementX*u),C=new Y().setFromAxisAngle(b,-m.movementY*u);e.landedLocalQuaternion.premultiply(A),e.landedLocalQuaternion.multiply(C);const G=new g(0,0,-1).applyQuaternion(e.landedLocalQuaternion);if(Math.abs(G.dot(f))<.999){const I=new g().crossVectors(G,f).normalize(),V=new g().crossVectors(f,I).normalize(),D=new dt().makeBasis(I,f,V.negate());e.landedLocalQuaternion.setFromRotationMatrix(D)}return}const w=new Y().setFromEuler(e.rotation),M=new Y().setFromAxisAngle(new g(0,1,0),-m.movementX*u),v=new Y().setFromAxisAngle(new g(1,0,0),-m.movementY*u);w.multiply(M),w.multiply(v),e.rotation.setFromQuaternion(w)},cycleViewMode:()=>{const m=["first","third","orbit"],h=m.indexOf(s.value);s.value=m[(h+1)%m.length]}}},so=()=>{const t=ge(!1),e=ge(""),o=ye({leftX:0,leftY:0,rightX:0,rightY:0}),n=ye({a:!1,b:!1,x:!1,y:!1,lb:!1,rb:!1,lt:0,rt:0,back:!1,start:!1,leftStick:!1,rightStick:!1,up:!1,down:!1,left:!1,right:!1}),s=.15,i=h=>Math.abs(h)<s?0:(h>0?1:-1)*(Math.abs(h)-s)/(1-s),r=()=>{var w,M,v,f,S,b,A,C,G,I,V,D,z,P,O,L;const h=navigator.getGamepads();let u=null;for(const F of h)if(F&&F.connected){u=F;break}if(!u){t.value=!1,e.value="";return}t.value=!0,e.value=u.id,o.leftX=i(u.axes[0]||0),o.leftY=i(u.axes[1]||0),o.rightX=i(u.axes[2]||0),o.rightY=i(u.axes[3]||0),n.a=((w=u.buttons[0])==null?void 0:w.pressed)||!1,n.b=((M=u.buttons[1])==null?void 0:M.pressed)||!1,n.x=((v=u.buttons[2])==null?void 0:v.pressed)||!1,n.y=((f=u.buttons[3])==null?void 0:f.pressed)||!1,n.lb=((S=u.buttons[4])==null?void 0:S.pressed)||!1,n.rb=((b=u.buttons[5])==null?void 0:b.pressed)||!1,n.lt=((A=u.buttons[6])==null?void 0:A.value)||0,n.rt=((C=u.buttons[7])==null?void 0:C.value)||0,n.back=((G=u.buttons[8])==null?void 0:G.pressed)||!1,n.start=((I=u.buttons[9])==null?void 0:I.pressed)||!1,n.leftStick=((V=u.buttons[10])==null?void 0:V.pressed)||!1,n.rightStick=((D=u.buttons[11])==null?void 0:D.pressed)||!1,n.up=((z=u.buttons[12])==null?void 0:z.pressed)||!1,n.down=((P=u.buttons[13])==null?void 0:P.pressed)||!1,n.left=((O=u.buttons[14])==null?void 0:O.pressed)||!1,n.right=((L=u.buttons[15])==null?void 0:L.pressed)||!1},c=h=>{h.forward=o.leftY<-.1,h.backward=o.leftY>.1,h.left=o.leftX<-.1,h.right=o.leftX>.1,h.up=n.rt>.1||n.a,h.down=n.lt>.1,h.rollLeft=n.lb,h.rollRight=n.rb,h.boost=n.leftStick},a=()=>({yaw:o.rightX*.12,pitch:o.rightY*.12});let l=null;const d=()=>{r(),l=requestAnimationFrame(d)},y=h=>{console.log("Gamepad connected:",h.gamepad.id),t.value=!0,e.value=h.gamepad.id},x=h=>{console.log("Gamepad disconnected:",h.gamepad.id),t.value=!1,e.value=""};return{gamepadConnected:t,gamepadName:e,axes:o,buttons:n,mapToControls:c,getRotationInput:a,startPolling:()=>{typeof window>"u"||(window.addEventListener("gamepadconnected",y),window.addEventListener("gamepaddisconnected",x),d())},stopPolling:()=>{l&&(cancelAnimationFrame(l),l=null),typeof window<"u"&&(window.removeEventListener("gamepadconnected",y),window.removeEventListener("gamepaddisconnected",x))}}},io={class:"backdrop-blur-sm bg-black/50 rounded-xl border border-cyan-500/30 p-4 min-w-[220px]"},ro={class:"text-xs text-cyan-300/60 uppercase tracking-wider mb-3 flex items-center gap-2"},co={key:0,class:"px-1.5 py-0.5 bg-orange-500/30 text-orange-300 rounded text-[10px] animate-pulse"},lo={key:1,class:"px-1.5 py-0.5 bg-cyan-500/30 text-cyan-300 rounded text-[10px] animate-pulse"},uo={class:"space-y-2 text-sm"},po={class:"flex justify-between"},mo={class:"text-cyan-100 font-mono"},ho={class:"flex justify-between"},fo={class:"text-cyan-100 font-mono"},wo={key:0,class:"flex justify-between items-center"},go={class:"text-amber-200"},vo={key:1,class:"flex justify-between"},yo={class:"text-amber-200"},bo={key:2,class:"mt-2 pt-2 border-t border-cyan-500/20"},xo={class:"flex justify-between items-center"},Mo={class:"text-cyan-300 font-mono text-xs"},So={class:"mt-1.5 h-1.5 bg-cyan-900/50 rounded-full overflow-hidden"},ko={class:"mt-3 pt-3 border-t border-cyan-500/20"},Co={class:"flex justify-between text-xs"},Po={class:"text-cyan-100/80 font-mono text-[10px]"},Ao={__name:"SpaceshipHUD",props:{hud:{type:Object,required:!0},ship:{type:Object,required:!0}},setup(t){return(e,o)=>{var n,s;return $(),ee("div",io,[p("div",ro,[o[0]||(o[0]=B(" 飞船状态 ",-1)),t.hud.isThrusting?($(),ee("span",co," 推进中 ")):se("",!0),t.hud.isMatchingVelocity?($(),ee("span",lo," 速度同步 ")):se("",!0)]),p("div",uo,[p("div",po,[o[1]||(o[1]=p("span",{class:"text-cyan-200/60"},"速度",-1)),p("span",mo,ae(t.hud.speed)+" m/s",1)]),p("div",ho,[o[2]||(o[2]=p("span",{class:"text-cyan-200/60"},"距离",-1)),p("span",fo,ae(t.hud.altitude)+" m",1)]),t.ship.isLanded?($(),ee("div",wo,[o[3]||(o[3]=p("span",{class:"text-green-300 flex items-center gap-1.5"}," 已降落 ",-1)),p("span",go,ae((n=t.ship.landedOn)==null?void 0:n.userData.name),1)])):t.hud.nearestBody?($(),ee("div",vo,[o[4]||(o[4]=p("span",{class:"text-cyan-200/60"},"最近天体",-1)),p("span",yo,ae(t.hud.nearestBody),1)])):se("",!0),t.hud.isMatchingVelocity&&!t.ship.isLanded?($(),ee("div",bo,[p("div",xo,[o[5]||(o[5]=p("span",{class:"text-cyan-200/60"},"同步中",-1)),p("span",Mo,ae((s=t.ship.matchingTarget)==null?void 0:s.userData.name),1)]),p("div",So,[p("div",{class:"h-full bg-gradient-to-r from-cyan-500 to-cyan-300 transition-all duration-150",style:wt({width:`${t.ship.initialVelocityDiff>.5?Math.max(0,100-Math.sqrt(Math.pow(t.ship.velocity.x-t.ship.targetVelocity.x,2)+Math.pow(t.ship.velocity.z-t.ship.targetVelocity.z,2))/t.ship.initialVelocityDiff*100):100}%`})},null,4)])])):se("",!0)]),p("div",ko,[p("div",Co,[o[6]||(o[6]=p("span",{class:"text-cyan-200/60"},"坐标 (m)",-1)),p("span",Po,ae(Math.round(t.ship.position.x))+", "+ae(Math.round(t.ship.position.y))+", "+ae(Math.round(t.ship.position.z)),1)])])])}}},Ro={key:0,class:"space-y-2"},Do={key:0,class:"backdrop-blur-sm bg-black/50 rounded-xl border border-cyan-500/30 p-4 text-xs"},zo={key:1,class:"backdrop-blur-sm bg-black/50 rounded-xl border border-green-500/30 p-4 text-xs"},Vo={__name:"ControlsPanel",props:{visible:{type:Boolean,default:!0},gamepadConnected:{type:Boolean,default:!1}},setup(t){return(e,o)=>($(),gt(vt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 translate-x-4","leave-to-class":"opacity-0 translate-x-4"},{default:Ke(()=>[t.visible?($(),ee("div",Ro,[t.gamepadConnected?se("",!0):($(),ee("div",Do,[...o[0]||(o[0]=[p("div",{class:"text-cyan-300/60 uppercase tracking-wider mb-3"},"键盘控制 (H 隐藏)",-1),p("div",{class:"grid grid-cols-2 gap-x-6 gap-y-1 text-cyan-200/80"},[p("div",null,[p("span",{class:"text-cyan-400"},"鼠标"),B(" 视角控制")]),p("div",null,[p("span",{class:"text-cyan-400"},"点击"),B(" 锁定鼠标")]),p("div",null,[p("span",{class:"text-cyan-400"},"W/S"),B(" 前进/后退")]),p("div",null,[p("span",{class:"text-cyan-400"},"A/D"),B(" 左移/右移")]),p("div",null,[p("span",{class:"text-cyan-400"},"Space"),B(" 上升")]),p("div",null,[p("span",{class:"text-cyan-400"},"Ctrl"),B(" 下降")]),p("div",null,[p("span",{class:"text-cyan-400"},"Q/E"),B(" 左转/右转")]),p("div",null,[p("span",{class:"text-cyan-400"},"↑/↓"),B(" 俯仰")]),p("div",null,[p("span",{class:"text-cyan-400"},"Shift"),B(" 加速")]),p("div",null,[p("span",{class:"text-cyan-400"},"X"),B(" 速度同步")]),p("div",null,[p("span",{class:"text-cyan-400"},"F"),B(" 起飞")]),p("div",null,[p("span",{class:"text-cyan-400"},"V"),B(" 切换视角")])],-1)])])),t.gamepadConnected?($(),ee("div",zo,[...o[1]||(o[1]=[p("div",{class:"text-green-300/60 uppercase tracking-wider mb-3"},"手柄控制",-1),p("div",{class:"grid grid-cols-2 gap-x-6 gap-y-1 text-green-200/80"},[p("div",null,[p("span",{class:"text-green-400"},"左摇杆"),B(" 移动")]),p("div",null,[p("span",{class:"text-green-400"},"右摇杆"),B(" 视角")]),p("div",null,[p("span",{class:"text-green-400"},"RT"),B(" 上升")]),p("div",null,[p("span",{class:"text-green-400"},"LT"),B(" 下降")]),p("div",null,[p("span",{class:"text-green-400"},"LB/RB"),B(" 翻滚")]),p("div",null,[p("span",{class:"text-green-400"},"左摇杆按下"),B(" 加速")]),p("div",null,[p("span",{class:"text-green-400"},"A"),B(" 起飞/上升")]),p("div",null,[p("span",{class:"text-green-400"},"X"),B(" 速度同步")]),p("div",null,[p("span",{class:"text-green-400"},"B"),B(" 切换视角")]),p("div",null,[p("span",{class:"text-green-400"},"Start"),B(" 隐藏说明")])],-1)])])):se("",!0)])):se("",!0)]),_:1}))}},Go={class:"fixed inset-0 w-full h-full overflow-hidden bg-[#020206] outline-none",tabindex:"0"},Lo={key:0,class:"absolute inset-0 flex items-center justify-center z-50 bg-[#020206]"},Io={class:"absolute bottom-4 left-4 md:bottom-6 md:left-6 z-10 space-y-2"},Eo={class:"absolute bottom-4 right-4 md:bottom-6 md:right-6 z-10"},To={class:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2 items-center"},_o={key:0,class:"px-3 py-1.5 rounded-lg bg-black/50 backdrop-blur-sm border border-green-500/30 text-green-300/80 text-xs flex items-center gap-1.5"},Oo={__name:"SpaceshipSimulator",setup(t){const e=ge(null),o=ge(!0),n=ge(!0);let s,i,r,c=null,a=0,l=[],d=Math.random()*Math.PI*2,y=0,x=0,R=null,m=new g(0,0,0),h=0,u=!1,w=null;const M=new g(8943,50,50),{ship:v,controls:f,hud:S,viewMode:b,setShipMesh:A,matchVelocityWithNearest:C,launch:G,updateShip:I,updateCamera:V,handleMouseMove:D,cycleViewMode:z}=ao(M),{gamepadConnected:P,buttons:O,mapToControls:L,getRotationInput:F,startPolling:N,stopPolling:Z}=so();let T={x:!1,b:!1,start:!1};const _=()=>{s=new ut,i=new pt(45,e.value.clientWidth/e.value.clientHeight,.5,15e4),r=new mt({antialias:!0,alpha:!0}),r.setSize(e.value.clientWidth,e.value.clientHeight),r.setPixelRatio(Math.min(window.devicePixelRatio,2)),r.toneMapping=ht,r.toneMappingExposure=1,e.value.appendChild(r.domElement),s.add(Jt());const E=new ft(3359829,.6);s.add(E);let W=!1;kt.forEach(q=>{const{group:we,sunCoronaGroup:ke}=eo(q);s.add(we),l.push(we),ke&&(R=ke),q.orbitRadius>0&&!q.isTwin&&!q.isComet&&!q.isQuantum&&s.add(Qe(q.orbitRadius)),q.isTwin&&!W&&(s.add(Qe(q.orbitRadius)),W=!0),q.isComet&&q.orbitA&&q.orbitB&&s.add(to(q.orbitA,q.orbitB))}),w=oo(v.position),A(w),s.add(w);const ue=Be(.016,l,d,y,x);d=ue.twinSystemAngle,x=ue.quantumAngle;const K=l.find(q=>q.userData.name==="木炉星");if(K){const q=K.position,we=K.userData.size;v.position.set(q.x,q.y+we+.5,q.z),w.position.copy(v.position),v.isLanded=!0,v.landedOn=K;const ke=K.userData.mesh?K.userData.mesh.rotation.y:0;v.landedLocalDir=new g(0,1,0);const Ee=new Y().setFromEuler(new Xe(0,0,0)),Ze=new Y().setFromAxisAngle(new g(0,1,0),ke);v.landedLocalQuaternion.copy(Ze.invert().multiply(Ee)),v.rotation.setFromQuaternion(Ee);const Je=me(K,l,d);v.velocity.copy(Je)}o.value=!1},j=E=>{c=requestAnimationFrame(j);const W=Math.min((E-a)/1e3,.1);if(a=E,h+=W,P.value){L(f);const K=F();if(Math.abs(K.yaw)>.01||Math.abs(K.pitch)>.01){const we={movementX:K.yaw/.002,movementY:K.pitch/.002};D(we,!0)}O.b&&!T.b&&z(),O.x&&!T.x&&C(l,d),O.start&&!T.start&&(n.value=!n.value),T.x=O.x,T.b=O.b,T.start=O.start}const ue=Be(W,l,d,y,x);d=ue.twinSystemAngle,x=ue.quantumAngle,I(W,l,d),V(i,l),R&&It(R,h),l.forEach(K=>{K.userData.atmosphere&&Vt(K.userData.atmosphere,m)}),r.render(s,i)},X=E=>{switch(E.code){case"KeyW":f.forward=!0;break;case"KeyS":f.backward=!0;break;case"KeyA":f.left=!0;break;case"KeyD":f.right=!0;break;case"Space":f.up=!0;break;case"ControlLeft":case"ControlRight":f.down=!0;break;case"KeyQ":f.rollLeft=!0;break;case"KeyE":f.rollRight=!0;break;case"ArrowUp":f.pitchUp=!0;break;case"ArrowDown":f.pitchDown=!0;break;case"ShiftLeft":case"ShiftRight":f.boost=!0;break;case"KeyX":C(l,d);break;case"KeyF":G(l,d);break;case"KeyH":n.value=!n.value;break;case"KeyV":z();break}},J=E=>{switch(E.code){case"KeyW":f.forward=!1;break;case"KeyS":f.backward=!1;break;case"KeyA":f.left=!1;break;case"KeyD":f.right=!1;break;case"Space":f.up=!1;break;case"ControlLeft":case"ControlRight":f.down=!1;break;case"KeyQ":f.rollLeft=!1;break;case"KeyE":f.rollRight=!1;break;case"ArrowUp":f.pitchUp=!1;break;case"ArrowDown":f.pitchDown=!1;break;case"ShiftLeft":case"ShiftRight":f.boost=!1;break}},te=()=>{e.value&&(i.aspect=e.value.clientWidth/e.value.clientHeight,i.updateProjectionMatrix(),r.setSize(e.value.clientWidth,e.value.clientHeight))},ne=E=>{D(E,u)},re=()=>{u=document.pointerLockElement===e.value},ce=()=>{!u&&e.value&&e.value.requestPointerLock()},le=()=>{if(document.visibilityState==="visible"){let E;do E=Math.floor(Math.random()*Ge.length);while(E===y&&Ge.length>1);y=E,x=Math.random()*Math.PI*2}};return bt(()=>{typeof window<"u"&&e.value&&(_(),a=performance.now(),j(a),window.addEventListener("resize",te),window.addEventListener("keydown",X),window.addEventListener("keyup",J),document.addEventListener("visibilitychange",le),document.addEventListener("pointerlockchange",re),document.addEventListener("mousemove",ne),e.value.addEventListener("click",ce),N(),e.value.focus())}),xt(()=>{c&&cancelAnimationFrame(c),Z(),window.removeEventListener("resize",te),window.removeEventListener("keydown",X),window.removeEventListener("keyup",J),document.removeEventListener("visibilitychange",le),document.removeEventListener("pointerlockchange",re),document.removeEventListener("mousemove",ne),e.value&&e.value.removeEventListener("click",ce),r&&r.dispose()}),(E,W)=>($(),ee("div",Go,[o.value?($(),ee("div",Lo,[...W[1]||(W[1]=[p("div",{class:"text-center"},[p("div",{class:"w-16 h-16 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),p("div",{class:"text-amber-200/80 text-lg tracking-widest font-light"},"初始化飞船系统...")],-1)])])):se("",!0),p("div",{ref_key:"containerRef",ref:e,class:"w-full h-full"},null,512),W[3]||(W[3]=Te('<a href="/workshop/" class="absolute top-4 left-4 md:top-6 md:left-6 z-10 flex items-center gap-2 px-3 py-2 rounded-lg bg-black/50 backdrop-blur-sm border border-amber-500/30 text-amber-200/80 hover:text-amber-100 hover:bg-black/70 hover:border-amber-500/50 transition-all duration-300 group" data-v-ee301256><svg class="w-5 h-5 transform group-hover:-translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-ee301256><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-ee301256></path></svg><span class="text-sm tracking-wide" data-v-ee301256>返回</span></a><div class="absolute top-4 right-4 md:top-6 md:right-6 z-10 text-right" data-v-ee301256><div class="text-xl md:text-2xl font-bold text-amber-200 tracking-wider drop-shadow-[0_0_20px_rgba(251,191,36,0.3)]" data-v-ee301256> OUTER WILDS </div><div class="text-xs md:text-sm text-amber-200/60 mt-1 tracking-wide" data-v-ee301256> SPACECRAFT SIMULATOR </div></div>',2)),p("div",Io,[Re(Ao,{hud:de(S),ship:de(v)},null,8,["hud","ship"])]),p("div",Eo,[Re(Vo,{visible:n.value,"gamepad-connected":de(P)},null,8,["visible","gamepad-connected"])]),W[4]||(W[4]=Te('<div class="absolute inset-0 pointer-events-none z-5" data-v-ee301256><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2" data-v-ee301256><div class="w-6 h-6 border border-cyan-400/40 rounded-full" data-v-ee301256></div><div class="absolute top-1/2 left-0 w-2 h-px bg-cyan-400/40 -translate-x-full -translate-y-1/2" data-v-ee301256></div><div class="absolute top-1/2 right-0 w-2 h-px bg-cyan-400/40 translate-x-full -translate-y-1/2" data-v-ee301256></div><div class="absolute left-1/2 top-0 w-px h-2 bg-cyan-400/40 -translate-y-full -translate-x-1/2" data-v-ee301256></div><div class="absolute left-1/2 bottom-0 w-px h-2 bg-cyan-400/40 translate-y-full -translate-x-1/2" data-v-ee301256></div></div></div>',1)),p("div",To,[de(P)?($(),ee("div",_o,[...W[2]||(W[2]=[p("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[p("path",{d:"M7 6h10a5 5 0 0 1 5 5v2a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5v-2a5 5 0 0 1 5-5zm1 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})],-1),B(" 手柄已连接 ",-1)])])):se("",!0),p("button",{onClick:W[0]||(W[0]=(...ue)=>de(z)&&de(z)(...ue)),class:"px-3 py-1.5 rounded-lg bg-black/50 backdrop-blur-sm border border-cyan-500/30 text-cyan-200/80 text-xs hover:bg-cyan-900/30 hover:border-cyan-400/50 transition-all"}," 视角 (V): "+ae(de(b)==="first"?"第一人称":de(b)==="third"?"第三人称":"轨道"),1)])]))}},Qo=yt(Oo,[["__scopeId","data-v-ee301256"]]),qo=JSON.parse('{"title":"星际拓荒飞船模拟器","description":"","frontmatter":{"layout":false,"title":"星际拓荒飞船模拟器"},"headers":[],"relativePath":"workshop/spaceship-simulator.md","filePath":"workshop/spaceship-simulator.md"}'),Fo={name:"workshop/spaceship-simulator.md"},Uo=Object.assign(Fo,{setup(t){return(e,o)=>{const n=Mt("ClientOnly");return $(),ee("div",null,[Re(n,null,{default:Ke(()=>[Re(Qo)]),_:1})])}}});export{qo as __pageData,Uo as default};
