import{_ as i,c as a,o as n,a4 as l}from"./chunks/framework.DdddRsJj.js";const h="/assets/9709694b-db05-4cce-8d2f-1c8b09f4d921.BMPPFQIg.png",t="data:image/png;base64,",k="data:image/png;base64,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",p="data:image/png;base64,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",e="data:image/png;base64,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",E="data:image/png;base64,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",r="data:image/png;base64,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",d="data:image/png;base64,",D=JSON.parse('{"title":"一、概览","description":"","frontmatter":{},"headers":[],"relativePath":"cs/java/JavaIO.md","filePath":"cs/java/JavaIO.md"}'),g={name:"cs/java/JavaIO.md"};function y(c,s,A,o,F,u){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="一、概览" tabindex="-1">一、概览 <a class="header-anchor" href="#一、概览" aria-label="Permalink to &quot;一、概览&quot;">​</a></h1><p>Java 的 I/O 大概可以分成以下几类：</p><ul><li>磁盘操作：File</li><li>字节操作：InputStream 和 OutputStream</li><li>字符操作：Reader 和 Writer</li><li>对象操作：Serializable</li><li>网络操作：Socket</li><li>新的输入/输出：NIO</li></ul><h1 id="二、磁盘操作" tabindex="-1">二、磁盘操作 <a class="header-anchor" href="#二、磁盘操作" aria-label="Permalink to &quot;二、磁盘操作&quot;">​</a></h1><p>File 类可以用于表示文件和目录的信息，但是它不表示文件的内容。</p><p>递归地列出一个目录下所有文件：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> listAllFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(File dir) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dir.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (dir.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (File file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dir.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        listAllFiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>从 Java7 开始，可以使用 Paths 和 Files 代替 File。</p><h1 id="三、字节操作" tabindex="-1">三、字节操作 <a class="header-anchor" href="#三、字节操作" aria-label="Permalink to &quot;三、字节操作&quot;">​</a></h1><h2 id="实现文件复制" tabindex="-1">实现文件复制 <a class="header-anchor" href="#实现文件复制" aria-label="Permalink to &quot;实现文件复制&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> copyFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String src, String dist) throws IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileInputStream in </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(src);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileOutputStream out </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dist);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cnt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // read() 最多读取 buffer.length 个字节</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 返回的是实际读取的个数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 返回 -1 的时候表示读到 eof，即文件尾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((cnt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> in.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, buffer.length)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cnt);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    in.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="装饰者模式" tabindex="-1">装饰者模式 <a class="header-anchor" href="#装饰者模式" aria-label="Permalink to &quot;装饰者模式&quot;">​</a></h2><p>Java I/O 使用了装饰者模式来实现。以 InputStream 为例，</p><ul><li>InputStream 是抽象组件；</li><li>FileInputStream 是 InputStream 的子类，属于具体组件，提供了字节流的输入操作；</li><li>FilterInputStream 属于抽象装饰者，装饰者用于装饰组件，为组件提供额外的功能。例如 BufferedInputStream 为 FileInputStream 提供缓存的功能。</li></ul><p><img src="`+h+`" alt="avatar | 650"><br></p><p>实例化一个具有缓存功能的字节流对象时，只需要在 FileInputStream 对象上再套一层 BufferedInputStream 对象即可。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FileInputStream fileInputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BufferedInputStream bufferedInputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BufferedInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileInputStream);</span></span></code></pre></div><p>DataInputStream 装饰者提供了对更多数据类型进行输入的操作，比如 int、double 等基本类型。</p><h1 id="四、字符操作" tabindex="-1">四、字符操作 <a class="header-anchor" href="#四、字符操作" aria-label="Permalink to &quot;四、字符操作&quot;">​</a></h1><h2 id="编码与解码" tabindex="-1">编码与解码 <a class="header-anchor" href="#编码与解码" aria-label="Permalink to &quot;编码与解码&quot;">​</a></h2><p>编码就是把字符转换为字节，而解码是把字节重新组合成字符。</p><p>如果编码和解码过程使用不同的编码方式那么就出现了乱码。</p><ul><li>GBK 编码中，中文字符占 2 个字节，英文字符占 1 个字节；</li><li>UTF-8 编码中，中文字符占 3 个字节，英文字符占 1 个字节；</li><li>UTF-16be 编码中，中文字符和英文字符都占 2 个字节。</li></ul><p>UTF-16be 中的 be 指的是 Big Endian，也就是大端。相应地也有 UTF-16le，le 指的是 Little Endian，也就是小端。</p><p>Java 的内存编码使用双字节编码 UTF-16be，这不是指 Java 只支持这一种编码方式，而是说 char 这种类型使用 UTF-16be 进行编码。char 类型占 16 位，也就是两个字节，Java 使用这种双字节编码是为了让一个中文或者一个英文都能使用一个 char 来存储。</p><h2 id="string-的编码方式" tabindex="-1">String 的编码方式 <a class="header-anchor" href="#string-的编码方式" aria-label="Permalink to &quot;String 的编码方式&quot;">​</a></h2><p>String 可以看成一个字符序列，可以指定一个编码方式将它编码为字节序列，也可以指定一个编码方式将一个字节序列解码为 String。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String str1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;中文&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String str2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bytes, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(str2);</span></span></code></pre></div><p>在调用无参数 getBytes() 方法时，默认的编码方式不是 UTF-16be。双字节编码的好处是可以使用一个 char 存储中文和英文，而将 String 转为 bytes[] 字节数组就不再需要这个好处，因此也就不再需要双字节编码。getBytes() 的默认编码方式与平台有关，一般为 UTF-8。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> str1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="reader-与-writer" tabindex="-1">Reader 与 Writer <a class="header-anchor" href="#reader-与-writer" aria-label="Permalink to &quot;Reader 与 Writer&quot;">​</a></h2><p>不管是磁盘还是网络传输，最小的存储单元都是字节，而不是字符。但是在程序中操作的通常是字符形式的数据，因此需要提供对字符进行操作的方法。</p><ul><li>InputStreamReader 实现从字节流解码成字符流；</li><li>OutputStreamWriter 实现字符流编码成为字节流。</li></ul><h2 id="实现逐行输出文本文件的内容" tabindex="-1">实现逐行输出文本文件的内容 <a class="header-anchor" href="#实现逐行输出文本文件的内容" aria-label="Permalink to &quot;实现逐行输出文本文件的内容&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFileContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String filePath) throws IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileReader fileReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    BufferedReader bufferedReader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileReader);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String line;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bufferedReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 装饰者模式使得 BufferedReader 组合了一个 Reader 对象</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 在调用 BufferedReader 的 close() 方法时会去调用 Reader 的 close() 方法</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 因此只要一个 close() 调用即可</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bufferedReader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="五、对象操作" tabindex="-1">五、对象操作 <a class="header-anchor" href="#五、对象操作" aria-label="Permalink to &quot;五、对象操作&quot;">​</a></h1><h2 id="序列化" tabindex="-1">序列化 <a class="header-anchor" href="#序列化" aria-label="Permalink to &quot;序列化&quot;">​</a></h2><p>序列化就是将一个对象转换成字节序列，方便存储和传输。</p><ul><li>序列化：ObjectOutputStream.writeObject()</li><li>反序列化：ObjectInputStream.readObject()</li></ul><p>不会对静态变量进行序列化，因为序列化只是保存对象的状态，静态变量属于类的状态。</p><h2 id="serializable" tabindex="-1">Serializable <a class="header-anchor" href="#serializable" aria-label="Permalink to &quot;Serializable&quot;">​</a></h2><p>序列化的类需要实现 Serializable 接口，它只是一个标准，没有任何方法需要实现，但是如果不去实现它的话而进行序列化，会抛出异常。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws IOException, ClassNotFoundException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A a1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String objectFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;file/a1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ObjectOutputStream objectOutputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ObjectOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(objectFile));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    objectOutputStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    objectOutputStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ObjectInputStream objectInputStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ObjectInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(objectFile));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A a2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (A) objectInputStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    objectInputStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a2);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Serializable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String y;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;x = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;  &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;y = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="transient" tabindex="-1">transient <a class="header-anchor" href="#transient" aria-label="Permalink to &quot;transient&quot;">​</a></h2><p>transient 关键字可以使一些属性不会被序列化。</p><p>ArrayList 中存储数据的数组 elementData 是用 transient 修饰的，因为这个数组是动态扩展的，并不是所有的空间都被使用，因此就不需要所有的内容都被序列化。通过重写序列化和反序列化方法，使得可以只序列化数组中有内容的那部分数据。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> transient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] elementData;</span></span></code></pre></div><h1 id="六、网络操作" tabindex="-1">六、网络操作 <a class="header-anchor" href="#六、网络操作" aria-label="Permalink to &quot;六、网络操作&quot;">​</a></h1><p>Java 中的网络支持：</p><ul><li>InetAddress：用于表示网络上的硬件资源，即 IP 地址；</li><li>URL：统一资源定位符；</li><li>Sockets：使用 TCP 协议实现网络通信；</li><li>Datagram：使用 UDP 协议实现网络通信。</li></ul><h2 id="inetaddress" tabindex="-1">InetAddress <a class="header-anchor" href="#inetaddress" aria-label="Permalink to &quot;InetAddress&quot;">​</a></h2><p>没有公有的构造函数，只能通过静态方法来创建实例。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InetAddress.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String host);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InetAddress.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getByAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] address);</span></span></code></pre></div><h2 id="url" tabindex="-1">URL <a class="header-anchor" href="#url" aria-label="Permalink to &quot;URL&quot;">​</a></h2><p>可以直接从 URL 中读取字节流数据。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) throws IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    URL url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.baidu.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 字节流 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    InputStream is </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 字符流 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    InputStreamReader isr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InputStreamReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(is, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 提供缓存功能 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    BufferedReader br </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isr);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String line;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> br.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    br.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="sockets" tabindex="-1">Sockets <a class="header-anchor" href="#sockets" aria-label="Permalink to &quot;Sockets&quot;">​</a></h2><ul><li>ServerSocket：服务器端类</li><li>Socket：客户端类</li><li>服务器和客户端通过 InputStream 和 OutputStream 进行输入输出。</li></ul><p><img src="`+t+'" alt="avatar | 550"><br></p><h2 id="datagram" tabindex="-1">Datagram <a class="header-anchor" href="#datagram" aria-label="Permalink to &quot;Datagram&quot;">​</a></h2><ul><li>DatagramSocket：通信类</li><li>DatagramPacket：数据包类</li></ul><h1 id="七、nio" tabindex="-1">七、NIO <a class="header-anchor" href="#七、nio" aria-label="Permalink to &quot;七、NIO&quot;">​</a></h1><p>新的输入/输出 (NIO) 库是在 JDK 1.4 中引入的，弥补了原来的 I/O 的不足，提供了高速的、面向块的 I/O。</p><h2 id="流与块" tabindex="-1">流与块 <a class="header-anchor" href="#流与块" aria-label="Permalink to &quot;流与块&quot;">​</a></h2><p>I/O 与 NIO 最重要的区别是数据打包和传输的方式，I/O 以流的方式处理数据，而 NIO 以块的方式处理数据。</p><p>面向流的 I/O 一次处理一个字节数据：一个输入流产生一个字节数据，一个输出流消费一个字节数据。为流式数据创建过滤器非常容易，链接几个过滤器，以便每个过滤器只负责复杂处理机制的一部分。不利的一面是，面向流的 I/O 通常相当慢。</p><p>面向块的 I/O 一次处理一个数据块，按块处理数据比按流处理数据要快得多。但是面向块的 I/O 缺少一些面向流的 I/O 所具有的优雅性和简单性。</p><p>I/O 包和 NIO 已经很好地集成了，java.io.* 已经以 NIO 为基础重新实现了，所以现在它可以利用 NIO 的一些特性。例如，java.io.* 包中的一些类包含以块的形式读写数据的方法，这使得即使在面向流的系统中，处理速度也会更快。</p><h2 id="通道与缓冲区" tabindex="-1">通道与缓冲区 <a class="header-anchor" href="#通道与缓冲区" aria-label="Permalink to &quot;通道与缓冲区&quot;">​</a></h2><h3 id="_1-通道" tabindex="-1">1. 通道 <a class="header-anchor" href="#_1-通道" aria-label="Permalink to &quot;1. 通道&quot;">​</a></h3><p>通道 Channel 是对原 I/O 包中的流的模拟，可以通过它读取和写入数据。</p><p>通道与流的不同之处在于，流只能在一个方向上移动(一个流必须是 InputStream 或者 OutputStream 的子类)，而通道是双向的，可以用于读、写或者同时用于读写。</p><p>通道包括以下类型：</p><ul><li>FileChannel：从文件中读写数据；</li><li>DatagramChannel：通过 UDP 读写网络中数据；</li><li>SocketChannel：通过 TCP 读写网络中数据；</li><li>ServerSocketChannel：可以监听新进来的 TCP 连接，对每一个新进来的连接都会创建一个 SocketChannel。</li></ul><h3 id="_2-缓冲区" tabindex="-1">2. 缓冲区 <a class="header-anchor" href="#_2-缓冲区" aria-label="Permalink to &quot;2. 缓冲区&quot;">​</a></h3><p>发送给一个通道的所有数据都必须首先放到缓冲区中，同样地，从通道中读取的任何数据都要先读到缓冲区中。也就是说，不会直接对通道进行读写数据，而是要先经过缓冲区。</p><p>缓冲区实质上是一个数组，但它不仅仅是一个数组。缓冲区提供了对数据的结构化访问，而且还可以跟踪系统的读/写进程。</p><p>缓冲区包括以下类型：</p><ul><li>ByteBuffer</li><li>CharBuffer</li><li>ShortBuffer</li><li>IntBuffer</li><li>LongBuffer</li><li>FloatBuffer</li><li>DoubleBuffer</li></ul><h2 id="缓冲区状态变量" tabindex="-1">缓冲区状态变量 <a class="header-anchor" href="#缓冲区状态变量" aria-label="Permalink to &quot;缓冲区状态变量&quot;">​</a></h2><ul><li>capacity：最大容量；</li><li>position：当前已经读写的字节数；</li><li>limit：还可以读写的字节数。</li></ul><p>状态变量的改变过程举例：</p><p>① 新建一个大小为 8 个字节的缓冲区，此时 position 为 0，而 limit = capacity = 8。capacity 变量不会改变，下面的讨论会忽略它。</p><p><img src="'+k+'" alt="avatar"><br></p><p>② 从输入通道中读取 5 个字节数据写入缓冲区中，此时 position 为 5，limit 保持不变。</p><p><img src="'+p+'" alt="avatar"><br></p><p>③ 在将缓冲区的数据写到输出通道之前，需要先调用 flip() 方法，这个方法将 limit 设置为当前 position，并将 position 设置为 0。</p><p><img src="'+e+'" alt="avatar"><br></p><p>④ 从缓冲区中取 4 个字节到输出缓冲中，此时 position 设为 4。</p><p><img src="'+E+'" alt="avatar"><br></p><p>⑤ 最后需要调用 clear() 方法来清空缓冲区，此时 position 和 limit 都被设置为最初位置。</p><p><img src="'+r+`" alt="avatar"><br></p><h2 id="文件-nio-实例" tabindex="-1">文件 NIO 实例 <a class="header-anchor" href="#文件-nio-实例" aria-label="Permalink to &quot;文件 NIO 实例&quot;">​</a></h2><p>以下展示了使用 NIO 快速复制文件的实例：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fastCopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String src, String dist) throws IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 获得源文件的输入字节流 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileInputStream fin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileInputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(src);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 获取输入字节流的文件通道 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileChannel fcin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 获取目标文件的输出字节流 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileOutputStream fout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dist);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 获取输出字节流的文件通道 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    FileChannel fcout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* 为缓冲区分配 1024 个字节 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ByteBuffer buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ByteBuffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">allocateDirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* 从输入通道中读取数据到缓冲区中 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fcin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffer);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* read() 返回 -1 表示 EOF */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* 切换读写 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* 把缓冲区的内容写入输出文件中 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fcout.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffer);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* 清空缓冲区 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="选择器" tabindex="-1">选择器 <a class="header-anchor" href="#选择器" aria-label="Permalink to &quot;选择器&quot;">​</a></h2><p>NIO 常常被叫做非阻塞 IO，主要是因为 NIO 在网络通信中的非阻塞特性被广泛使用。</p><p>NIO 实现了 IO 多路复用中的 Reactor 模型，一个线程 Thread 使用一个选择器 Selector 通过轮询的方式去监听多个通道 Channel 上的事件，从而让一个线程就可以处理多个事件。</p><p>通过配置监听的通道 Channel 为非阻塞，那么当 Channel 上的 IO 事件还未到达时，就不会进入阻塞状态一直等待，而是继续轮询其它 Channel，找到 IO 事件已经到达的 Channel 执行。</p><p>因为创建和切换线程的开销很大，因此使用一个线程来处理多个事件而不是一个线程处理一个事件，对于 IO 密集型的应用具有很好地性能。</p><p>应该注意的是，只有套接字 Channel 才能配置为非阻塞，而 FileChannel 不能，为 FileChannel 配置非阻塞也没有意义。</p><p><img src="`+d+`" alt="avatar | 350"><br></p><h3 id="_1-创建选择器" tabindex="-1">1. 创建选择器 <a class="header-anchor" href="#_1-创建选择器" aria-label="Permalink to &quot;1. 创建选择器&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Selector selector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="_2-将通道注册到选择器上" tabindex="-1">2. 将通道注册到选择器上 <a class="header-anchor" href="#_2-将通道注册到选择器上" aria-label="Permalink to &quot;2. 将通道注册到选择器上&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ServerSocketChannel ssChannel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ServerSocketChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ssChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configureBlocking</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ssChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector, SelectionKey.OP_ACCEPT);</span></span></code></pre></div><p>通道必须配置为非阻塞模式，否则使用选择器就没有任何意义了，因为如果通道在某个事件上被阻塞，那么服务器就不能响应其它事件，必须等待这个事件处理完毕才能去处理其它事件，显然这和选择器的作用背道而驰。</p><p>在将通道注册到选择器上时，还需要指定要注册的具体事件，主要有以下几类：</p><ul><li>SelectionKey.OP_CONNECT</li><li>SelectionKey.OP_ACCEPT</li><li>SelectionKey.OP_READ</li><li>SelectionKey.OP_WRITE</li></ul><p>它们在 SelectionKey 的定义如下：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OP_READ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OP_WRITE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OP_CONNECT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OP_ACCEPT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>可以看出每个事件可以被当成一个位域，从而组成事件集整数。例如：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interestSet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SelectionKey.OP_READ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SelectionKey.OP_WRITE;</span></span></code></pre></div><h3 id="_3-监听事件" tabindex="-1">3. 监听事件 <a class="header-anchor" href="#_3-监听事件" aria-label="Permalink to &quot;3. 监听事件&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>使用 select() 来监听到达的事件，它会一直阻塞直到有至少一个事件到达。</p><h3 id="_4-获取到达的事件" tabindex="-1">4. 获取到达的事件 <a class="header-anchor" href="#_4-获取到达的事件" aria-label="Permalink to &quot;4. 获取到达的事件&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectedKeys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Iterator&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keyIterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SelectionKey key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAcceptable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isReadable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-事件循环" tabindex="-1">5. 事件循环 <a class="header-anchor" href="#_5-事件循环" aria-label="Permalink to &quot;5. 事件循环&quot;">​</a></h3><p>因为一次 select() 调用不能处理完所有的事件，并且服务器端有可能需要一直监听事件，因此服务器端处理事件的代码一般会放在一个死循环内。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectedKeys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Iterator&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keyIterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SelectionKey key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAcceptable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isReadable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="套接字-nio-实例" tabindex="-1">套接字 NIO 实例 <a class="header-anchor" href="#套接字-nio-实例" aria-label="Permalink to &quot;套接字 NIO 实例&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NIOServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Selector selector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerSocketChannel ssChannel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ServerSocketChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ssChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configureBlocking</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ssChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector, SelectionKey.OP_ACCEPT);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerSocket serverSocket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        InetSocketAddress address </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InetSocketAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        serverSocket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(address);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> selector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectedKeys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Iterator&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SelectionKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; keyIterator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">iterator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasNext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                SelectionKey key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAcceptable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    ServerSocketChannel ssChannel1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ServerSocketChannel) key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 服务器会为每个新连接创建一个 SocketChannel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    SocketChannel sChannel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssChannel1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configureBlocking</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // 这个新连接主要用于从客户端读取数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector, SelectionKey.OP_READ);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isReadable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    SocketChannel sChannel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SocketChannel) key.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">channel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readDataFromSocketChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sChannel));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    sChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                keyIterator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readDataFromSocketChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SocketChannel </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ByteBuffer buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ByteBuffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">allocate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        StringBuilder data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StringBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sChannel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(buffer);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> limit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] dst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[limit];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> limit; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                dst[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dst);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NIOClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Socket socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Socket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8888</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        OutputStream out </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hello world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="内存映射文件" tabindex="-1">内存映射文件 <a class="header-anchor" href="#内存映射文件" aria-label="Permalink to &quot;内存映射文件&quot;">​</a></h2><p>内存映射文件 I/O 是一种读和写文件数据的方法，它可以比常规的基于流或者基于通道的 I/O 快得多。</p><p>向内存映射文件写入可能是危险的，只是改变数组的单个元素这样的简单操作，就可能会直接修改磁盘上的文件。修改数据与将数据保存到磁盘是没有分开的。</p><p>下面代码行将文件的前 1024 个字节映射到内存中，map() 方法返回一个 MappedByteBuffer，它是 ByteBuffer 的子类。因此，可以像使用其他任何 ByteBuffer 一样使用新映射的缓冲区，操作系统会在需要时负责执行映射。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MappedByteBuffer mbb </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(FileChannel.MapMode.READ_WRITE, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="对比" tabindex="-1">对比 <a class="header-anchor" href="#对比" aria-label="Permalink to &quot;对比&quot;">​</a></h2><p>NIO 与普通 I/O 的区别主要有以下两点：</p><ul><li>NIO 是非阻塞的；</li><li>NIO 面向块，I/O 面向流。</li></ul><h1 id="八、参考资料" tabindex="-1">八、参考资料 <a class="header-anchor" href="#八、参考资料" aria-label="Permalink to &quot;八、参考资料&quot;">​</a></h1><ul><li>Eckel B, 埃克尔, 昊鹏, 等. Java 编程思想 [M]. 机械工业出版社, 2002.</li><li><a href="https://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html" target="_blank" rel="noreferrer">IBM: NIO 入门</a></li><li><a href="http://tutorials.jenkov.com/java-nio/index.html" target="_blank" rel="noreferrer">Java NIO Tutorial</a></li><li><a href="https://tech.meituan.com/nio.html" target="_blank" rel="noreferrer">Java NIO 浅析</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-javaio/index.html" target="_blank" rel="noreferrer">IBM: 深入分析 Java I/O 的工作机制</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/index.html" target="_blank" rel="noreferrer">IBM: 深入分析 Java 中的中文编码问题</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-serial/index.html" target="_blank" rel="noreferrer">IBM: Java 序列化的高级认识</a></li><li><a href="http://blog.csdn.net/shimiso/article/details/24990499" target="_blank" rel="noreferrer">NIO 与传统 IO 的区别</a></li><li><a href="http://stg-tud.github.io/sedc/Lecture/ws13-14/5.3-Decorator.html#mode=document" target="_blank" rel="noreferrer">Decorator Design Pattern</a></li><li><a href="http://labojava.blogspot.com/2012/12/socket-multicast.html" target="_blank" rel="noreferrer">Socket Multicast</a></li></ul>`,134)])])}const b=i(g,[["render",y]]);export{D as __pageData,b as default};
