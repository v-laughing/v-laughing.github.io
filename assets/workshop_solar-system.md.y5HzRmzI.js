import{_ as Xt,p as Z,v as Wt,Y as Vt,c as X,o as W,e as et,j as g,a4 as qt,G as dt,n as _t,t as F,w as gt,N as Tt,T as Dt,C as Qt}from"./chunks/framework.DQgBWl2g.js";import{C as $t,V as j,M as H,T as q,Q as Rt,S as At,a as R,R as Jt,P as te,b as ee,c as se,d as ie,W as oe,A as ae,e as ne,f as z,g as C,h as re,B as ft,F as lt,i as le,j as he,k as ce,G as Ot,l as G,m as ht,n as de,o as ue,H as pe,D as bt,p as me,q as Ct,L as _e,r as kt,s as fe,t as be}from"./chunks/three.module.qkk1P2i0.js";const Lt={type:"change"},wt={type:"start"},It={type:"end"},ct=new Jt,zt=new te,ye=Math.cos(70*ee.DEG2RAD),y=new j,E=2*Math.PI,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},yt=1e-6;class ge extends $t{constructor(t,e=null){super(t,e),this.state=u.NONE,this.target=new j,this.cursor=new j,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:H.ROTATE,MIDDLE:H.DOLLY,RIGHT:H.PAN},this.touches={ONE:q.ROTATE,TWO:q.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new j,this._lastQuaternion=new Rt,this._lastTargetPosition=new j,this._quat=new Rt().setFromUnitVectors(t.up,new j(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new At,this._sphericalDelta=new At,this._scale=1,this._panOffset=new j,this._rotateStart=new R,this._rotateEnd=new R,this._rotateDelta=new R,this._panStart=new R,this._panEnd=new R,this._panDelta=new R,this._dollyStart=new R,this._dollyEnd=new R,this._dollyDelta=new R,this._dollyDirection=new j,this._mouse=new R,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=xe.bind(this),this._onPointerDown=we.bind(this),this._onPointerUp=Me.bind(this),this._onContextMenu=Re.bind(this),this._onMouseWheel=ve.bind(this),this._onKeyDown=Pe.bind(this),this._onTouchStart=Te.bind(this),this._onTouchMove=De.bind(this),this._onMouseDown=Se.bind(this),this._onMouseMove=Ee.bind(this),this._interceptControlDown=Ae.bind(this),this._interceptControlUp=Oe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Lt),this.update(),this.state=u.NONE}update(t=null){const e=this.object.position;y.copy(e).sub(this.target),y.applyQuaternion(this._quat),this._spherical.setFromVector3(y),this.autoRotate&&this.state===u.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let l=this.minAzimuthAngle,c=this.maxAzimuthAngle;isFinite(l)&&isFinite(c)&&(l<-Math.PI?l+=E:l>Math.PI&&(l-=E),c<-Math.PI?c+=E:c>Math.PI&&(c-=E),l<=c?this._spherical.theta=Math.max(l,Math.min(c,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(l+c)/2?Math.max(l,this._spherical.theta):Math.min(c,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let _=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const f=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),_=f!=this._spherical.radius}if(y.setFromSpherical(this._spherical),y.applyQuaternion(this._quatInverse),e.copy(this.target).add(y),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let f=null;if(this.object.isPerspectiveCamera){const x=y.length();f=this._clampDistance(x*this._scale);const w=x-f;this.object.position.addScaledVector(this._dollyDirection,w),this.object.updateMatrixWorld(),_=!!w}else if(this.object.isOrthographicCamera){const x=new j(this._mouse.x,this._mouse.y,0);x.unproject(this.object);const w=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),_=w!==this.object.zoom;const k=new j(this._mouse.x,this._mouse.y,0);k.unproject(this.object),this.object.position.sub(k).add(x),this.object.updateMatrixWorld(),f=y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;f!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(f).add(this.object.position):(ct.origin.copy(this.object.position),ct.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ct.direction))<ye?this.object.lookAt(this.target):(zt.setFromNormalAndCoplanarPoint(this.object.up,this.target),ct.intersectPlane(zt,this.target))))}else if(this.object.isOrthographicCamera){const f=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),f!==this.object.zoom&&(this.object.updateProjectionMatrix(),_=!0)}return this._scale=1,this._performCursorZoom=!1,_||this._lastPosition.distanceToSquared(this.object.position)>yt||8*(1-this._lastQuaternion.dot(this.object.quaternion))>yt||this._lastTargetPosition.distanceToSquared(this.target)>yt?(this.dispatchEvent(Lt),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?E/60*this.autoRotateSpeed*t:E/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){y.setFromMatrixColumn(e,0),y.multiplyScalar(-t),this._panOffset.add(y)}_panUp(t,e){this.screenSpacePanning===!0?y.setFromMatrixColumn(e,1):(y.setFromMatrixColumn(e,0),y.crossVectors(this.object.up,y)),y.multiplyScalar(t),this._panOffset.add(y)}_pan(t,e){const l=this.domElement;if(this.object.isPerspectiveCamera){const c=this.object.position;y.copy(c).sub(this.target);let _=y.length();_*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*_/l.clientHeight,this.object.matrix),this._panUp(2*e*_/l.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/l.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/l.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const l=this.domElement.getBoundingClientRect(),c=t-l.left,_=e-l.top,f=l.width,x=l.height;this._mouse.x=c/f*2-1,this._mouse.y=-(_/x)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(E*this._rotateDelta.x/e.clientHeight),this._rotateUp(E*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(E*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-E*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(E*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-E*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),l=.5*(t.pageX+e.x),c=.5*(t.pageY+e.y);this._rotateStart.set(l,c)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),l=.5*(t.pageX+e.x),c=.5*(t.pageY+e.y);this._panStart.set(l,c)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),l=t.pageX-e.x,c=t.pageY-e.y,_=Math.sqrt(l*l+c*c);this._dollyStart.set(0,_)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const l=this._getSecondPointerPosition(t),c=.5*(t.pageX+l.x),_=.5*(t.pageY+l.y);this._rotateEnd.set(c,_)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(E*this._rotateDelta.x/e.clientHeight),this._rotateUp(E*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),l=.5*(t.pageX+e.x),c=.5*(t.pageY+e.y);this._panEnd.set(l,c)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),l=t.pageX-e.x,c=t.pageY-e.y,_=Math.sqrt(l*l+c*c);this._dollyEnd.set(0,_),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const f=(t.pageX+e.x)*.5,x=(t.pageY+e.y)*.5;this._updateZoomParameters(f,x)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new R,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,l={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:l.deltaY*=16;break;case 2:l.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(l.deltaY*=10),l}}function we(a){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(a.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(a)&&(this._addPointer(a),a.pointerType==="touch"?this._onTouchStart(a):this._onMouseDown(a)))}function xe(a){this.enabled!==!1&&(a.pointerType==="touch"?this._onTouchMove(a):this._onMouseMove(a))}function Me(a){switch(this._removePointer(a),this._pointers.length){case 0:this.domElement.releasePointerCapture(a.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(It),this.state=u.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function Se(a){let t;switch(a.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case H.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(a),this.state=u.DOLLY;break;case H.ROTATE:if(a.ctrlKey||a.metaKey||a.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(a),this.state=u.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(a),this.state=u.ROTATE}break;case H.PAN:if(a.ctrlKey||a.metaKey||a.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(a),this.state=u.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(a),this.state=u.PAN}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(wt)}function Ee(a){switch(this.state){case u.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(a);break;case u.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(a);break;case u.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(a);break}}function ve(a){this.enabled===!1||this.enableZoom===!1||this.state!==u.NONE||(a.preventDefault(),this.dispatchEvent(wt),this._handleMouseWheel(this._customWheelEvent(a)),this.dispatchEvent(It))}function Pe(a){this.enabled!==!1&&this._handleKeyDown(a)}function Te(a){switch(this._trackPointer(a),this._pointers.length){case 1:switch(this.touches.ONE){case q.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(a),this.state=u.TOUCH_ROTATE;break;case q.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(a),this.state=u.TOUCH_PAN;break;default:this.state=u.NONE}break;case 2:switch(this.touches.TWO){case q.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(a),this.state=u.TOUCH_DOLLY_PAN;break;case q.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(a),this.state=u.TOUCH_DOLLY_ROTATE;break;default:this.state=u.NONE}break;default:this.state=u.NONE}this.state!==u.NONE&&this.dispatchEvent(wt)}function De(a){switch(this._trackPointer(a),this.state){case u.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(a),this.update();break;case u.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(a),this.update();break;case u.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(a),this.update();break;case u.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(a),this.update();break;default:this.state=u.NONE}}function Re(a){this.enabled!==!1&&a.preventDefault()}function Ae(a){a.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Oe(a){a.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const Ce={class:"fixed inset-0 w-full h-full overflow-hidden bg-[#030308]"},ke={key:0,class:"absolute inset-0 flex items-center justify-center z-50 bg-[#030308]"},Le={class:"absolute bottom-4 left-4 md:bottom-6 md:left-6 z-10"},ze={key:0,class:"text-center animate-fade-in"},je={class:"text-lg text-gray-500"},Ne={key:0,class:"absolute bottom-24 left-1/2 -translate-x-1/2 z-20 w-[90%] max-w-md"},Ie={class:"backdrop-blur-xl bg-black/60 rounded-2xl border border-amber-500/30 p-5 shadow-2xl shadow-amber-500/10"},He={class:"flex items-start gap-4"},Ye={class:"flex-1"},Ue={class:"text-lg font-semibold text-amber-100"},Ze={class:"text-xs text-amber-300/60 mb-2"},Ge={class:"text-sm text-gray-300/80 leading-relaxed"},jt=1320,Nt=20,V=5,I=2,Be={__name:"SolarSystem",setup(a){const t=Z(null);Z(null);const e=Z(null),l=Z(!0),c=Z(132),_=Z(!1),f=Z(!1),x=Z(10);let w,k,A,v,ut=null,Y=[],st=[],B=null,L=null,P=null,T=null,O=null,D=null,pt=0,Q=0;const Ht=[{name:"余烬孪星",nameEn:"Ember Twin",color:12868666,emissive:10767402,size:.7,orbitRadius:12,orbitSpeed:.008,rotationSpeed:.02,isTwin:!0,twinSide:1,description:"沙漏双星之一，红褐色的岩石行星，表面布满峡谷"},{name:"灰烬孪星",nameEn:"Ash Twin",color:15259043,emissive:13153667,size:.65,orbitRadius:12,orbitSpeed:.008,rotationSpeed:.018,isTwin:!0,twinSide:-1,description:"沙漏双星之一，沙色行星，沙子从这里流向余烬孪星"},{name:"闯入者",nameEn:"The Interloper",color:8969710,emissive:6732748,size:.4,orbitA:39,orbitB:24,orbitSpeed:.004,rotationSpeed:.008,isComet:!0,description:"一颗神秘的冰质彗星，内部隐藏着灾难性的秘密"},{name:"木炉星",nameEn:"Timber Hearth",color:8043130,emissive:5937754,size:1,orbitRadius:20,orbitSpeed:.005,rotationSpeed:.012,description:"你的家园，一切冒险的起点"},{name:"脆壳星",nameEn:"Brittle Hollow",color:8035274,emissive:5929898,size:1.2,orbitRadius:32,orbitSpeed:.004,rotationSpeed:.015,description:"一颗正在被黑洞吞噬的行星，地壳不断崩塌"},{name:"深巨星",nameEn:"Giant's Deep",color:5085818,emissive:4033130,size:2,orbitRadius:45,orbitSpeed:.003,rotationSpeed:.01,description:"被飓风笼罩的气态行星，隐藏着惊人的秘密"},{name:"黑棘星",nameEn:"Dark Bramble",color:4880986,emissive:3828298,size:1.5,orbitRadius:58,orbitSpeed:.0015,rotationSpeed:.005,description:"一个充满迷雾与危险的神秘空间，内部比外部更大"},{name:"量子卫星",nameEn:"Quantum Moon",color:12237546,emissive:10132170,size:.5,moonOrbitRadius:3,moonOrbitSpeed:.03,rotationSpeed:.025,isQuantum:!0,description:"一颗神秘的卫星，在不被观测时会瞬移到不同行星"}],it=["灰烬孪星","脆壳星","深巨星","黑棘星","木炉星"];let K=null,ot=0,$=0,at=Math.random()*Math.PI*2,U=null,N=null,M=null,nt=0;const Yt=()=>{const i=document.createElement("canvas");i.width=64,i.height=64;const o=i.getContext("2d"),n=o.createRadialGradient(32,32,0,32,32,32);return n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.15,"rgba(255, 255, 255, 1)"),n.addColorStop(.3,"rgba(255, 255, 255, 0.8)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.4)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),o.fillStyle=n,o.fillRect(0,0,64,64),new be(i)},Ut=()=>{const i=new ft,o=[],n=[];for(let h=0;h<12e3;h++){const d=300+Math.random()*1700,m=Math.random()*Math.PI*2,p=Math.acos(2*Math.random()-1),b=d*Math.sin(p)*Math.cos(m),S=d*Math.sin(p)*Math.sin(m),tt=d*Math.cos(p);o.push(b,S,tt);const rt=Math.random();rt<.1?n.push(1,.9,.7):rt<.2?n.push(.85,.95,1):n.push(1,1,1)}i.setAttribute("position",new lt(o,3)),i.setAttribute("color",new lt(n,3));const s=Yt(),r=new le({size:3,map:s,vertexColors:!0,transparent:!0,opacity:1,sizeAttenuation:!0,depthWrite:!1,blending:he});return new ce(i,r)},Zt=()=>{B=new Ot;const i=new G(4,64,64),o=new z({color:16755251});L=new C(i,o),B.add(L);const n=new G(4.5,32,32),s=new z({color:16737792,transparent:!0,opacity:.3,side:ht});P=new C(n,s),B.add(P);const r=new G(6,32,32),h=new z({color:16729088,transparent:!0,opacity:.15,side:ht});T=new C(r,h),B.add(T),O=new de(16768392,3,800),O.position.set(0,0,0),B.add(O);const d=new ue(5596808,.8);w.add(d);const m=new pe(16777198,2241348,.6);w.add(m);const p=new G(1,32,32),b=new z({color:16777215,transparent:!0,opacity:0,side:bt});return D=new C(p,b),B.add(D),B},xt=i=>{const n=new ft,s=[];for(let h=0;h<=128;h++){const d=h/128*Math.PI*2;s.push(Math.cos(d)*i,0,Math.sin(d)*i)}n.setAttribute("position",new lt(s,3));const r=new _e({color:3359829,transparent:!0,opacity:.4});return new kt(n,r)},Gt=(i,o)=>{const s=new ft,r=[],h=Math.sqrt(i*i-o*o);for(let p=0;p<=128;p++){const b=p/128*Math.PI*2;r.push(Math.cos(b)*i-h,0,Math.sin(b)*o)}s.setAttribute("position",new lt(r,3));const d=new fe({color:4491434,transparent:!0,opacity:.5,dashSize:1.5,gapSize:1}),m=new kt(s,d);return m.computeLineDistances(),m},Mt=i=>{const o=new Ot,n=new G(i.size,32,32),s=new me({color:i.color,emissive:i.emissive,emissiveIntensity:.6,roughness:.5,metalness:.2}),r=new C(n,s);o.add(r);const h=new G(i.size*1.15,32,32),d=new z({color:i.color,transparent:!0,opacity:.2,side:ht}),m=new C(h,d);if(o.add(m),i.name==="深巨星"){const p=new G(i.size*1.1,32,32),b=new z({color:8960938,transparent:!0,opacity:.3,side:bt}),S=new C(p,b);o.add(S)}if(i.name==="量子卫星"){const p=new G(i.size*1.3,16,16),b=new z({color:11184895,transparent:!0,opacity:.15,side:ht}),S=new C(p,b);o.add(S)}if(i.isComet){const p=new Ct(i.size*.8,i.size*6,8),b=new z({color:6741503,transparent:!0,opacity:.25,side:bt}),S=new C(p,b);S.rotation.x=Math.PI/2,S.position.z=i.size*3,o.add(S);const tt=new Ct(i.size*.4,i.size*4,8),rt=new z({color:11202303,transparent:!0,opacity:.4}),mt=new C(tt,rt);mt.rotation.x=Math.PI/2,mt.position.z=i.size*2.5,o.add(mt)}return o.userData={...i,angle:Math.random()*Math.PI*2,mesh:r},o},Bt=()=>{w=new se,k=new ie(60,t.value.clientWidth/t.value.clientHeight,.1,3e3),k.position.set(50,40,80),A=new oe({antialias:!0,alpha:!0}),A.setSize(t.value.clientWidth,t.value.clientHeight),A.setPixelRatio(Math.min(window.devicePixelRatio,2)),A.toneMapping=ae,A.toneMappingExposure=1.2,t.value.appendChild(A.domElement),v=new ge(k,A.domElement),v.enableDamping=!0,v.dampingFactor=.05,v.minDistance=10,v.maxDistance=300,v.enablePan=!0,v.panSpeed=1,v.rotateSpeed=.5,v.zoomSpeed=1.2,v.screenSpacePanning=!0,v.mouseButtons={LEFT:H.ROTATE,MIDDLE:H.PAN,RIGHT:H.PAN},w.add(Ut()),w.add(Zt());let i=!1;Ht.forEach(s=>{if(s.isQuantum){const h=Mt(s);w.add(h),Y.push(h),K=h,ot=Math.floor(Math.random()*it.length);return}if(s.isTwin){if(!i){const h=xt(s.orbitRadius);w.add(h),st.push(h),i=!0}}else{let h;s.isComet&&s.orbitA&&s.orbitB?h=Gt(s.orbitA,s.orbitB):h=xt(s.orbitRadius),w.add(h),st.push(h)}const r=Mt(s);w.add(r),Y.push(r),s.name==="余烬孪星"?U=r:s.name==="灰烬孪星"&&(N=r)});const o=new ne(.08,.15,1,8),n=new z({color:15259043,transparent:!0,opacity:.6});M=new C(o,n),w.add(M),pt=Date.now(),l.value=!1},J=(i,o,n)=>{const s=i>>16&255,r=i>>8&255,h=i&255,d=o>>16&255,m=o>>8&255,p=o&255,b=Math.round(s+(d-s)*n),S=Math.round(r+(m-r)*n),tt=Math.round(h+(p-h)*n);return b<<16|S<<8|tt},Kt=i=>{if(!(!L||!P||!T||!O)){if(i<=Nt&&i>V){const o=1-(i-V)/(Nt-V),n=o*o,s=J(16755251,4491519,n),r=J(16737792,2254557,n),h=J(16729088,1131690,n);L.material.color.setHex(s),P.material.color.setHex(r),T.material.color.setHex(h),O.color.setHex(J(16768392,8956671,n));const d=1+n*2.5;L.scale.setScalar(d),P.scale.setScalar(d),T.scale.setScalar(d*1.2),O.intensity=3+n*4,P.material.opacity=.3+n*.4,T.material.opacity=.15+n*.3}if(i<=V&&i>I){const o=1-(i-I)/(V-I);_.value=!0,L.material.color.setHex(11193599),P.material.color.setHex(8961023),T.material.color.setHex(6724095);const n=3.5+Math.sin(o*Math.PI*8)*.5+o*3;L.scale.setScalar(n),P.scale.setScalar(n*1.1),T.scale.setScalar(n*1.4),O.intensity=7+o*15;const s=o*200;D&&(D.scale.setScalar(s),D.material.opacity=Math.max(0,.8-o*.6),D.material.color.setHex(J(8961023,16777215,o))),Y.forEach(r=>{const h=r.position.length();if(h<s*1.2&&h>0){const d=Math.min(1,(s-h)/30);r.scale.setScalar(Math.max(0,1-d)),r.userData.mesh&&(r.userData.mesh.material.opacity=1-d,r.userData.mesh.material.transparent=!0)}}),st.forEach(r=>{r.material.opacity=Math.max(0,.4-o*.4)}),M&&(M.material.opacity=Math.max(0,.6-o*.6))}if(i<=I&&i>0){const o=1-i/I;f.value=!0,O.intensity=22+o*30,D&&(D.scale.setScalar(300+o*200),D.material.opacity=.2+o*.8)}}},Ft=()=>{pt=Date.now(),Q=0,c.value=jt,_.value=!1,f.value=!1,x.value=10,e.value=null,L&&P&&T&&O&&(L.material.color.setHex(16755251),P.material.color.setHex(16737792),T.material.color.setHex(16729088),O.color.setHex(16768392),L.scale.setScalar(1),P.scale.setScalar(1),T.scale.setScalar(1),O.intensity=3,P.material.opacity=.3,T.material.opacity=.15),D&&(D.scale.setScalar(1),D.material.opacity=0),Y.forEach(i=>{i.scale.setScalar(1),i.userData.mesh&&(i.userData.mesh.material.opacity=1,i.userData.mesh.material.transparent=!1)}),st.forEach(i=>{i.material.opacity=.4}),M&&(M.material.opacity=.6)},St=()=>{ut=requestAnimationFrame(St);const i=(Date.now()-pt)/1e3,o=Math.max(0,jt-i);if(c.value=o,Kt(o),o<=I&&!f.value&&(f.value=!0),o<=0&&Q===0&&(Q=Date.now()),Q>0){const n=(Date.now()-Q)/1e3;x.value=Math.max(0,10-n),x.value<=0&&Ft()}if(o>I&&(at+=.008),Y.forEach(n=>{const s=n.userData;if(!s.isQuantum&&o>I){if(s.isTwin||(s.angle+=s.orbitSpeed),s.isComet&&s.orbitA&&s.orbitB){const r=Math.sqrt(s.orbitA*s.orbitA-s.orbitB*s.orbitB);n.position.x=Math.cos(s.angle)*s.orbitA-r,n.position.z=Math.sin(s.angle)*s.orbitB;const h=s.orbitA*Math.sin(s.angle),d=-s.orbitB*Math.cos(s.angle);n.rotation.y=Math.atan2(h,d)}else if(s.isTwin){const r=Math.cos(at)*s.orbitRadius,h=Math.sin(at)*s.orbitRadius,d=1,m=at*8,p=Math.cos(m)*d*s.twinSide,b=Math.sin(m)*d*s.twinSide;n.position.x=r+p,n.position.z=h+b}else n.position.x=Math.cos(s.angle)*s.orbitRadius,n.position.z=Math.sin(s.angle)*s.orbitRadius;s.mesh&&(s.mesh.rotation.y+=s.rotationSpeed)}}),K&&o>I){const n=it[ot],s=Y.find(r=>r.userData.name===n);if(s){const r=K.userData;$+=r.moonOrbitSpeed,K.position.x=s.position.x+Math.cos($)*r.moonOrbitRadius,K.position.y=Math.sin($)*r.moonOrbitRadius*.3,K.position.z=s.position.z+Math.sin($)*r.moonOrbitRadius,r.mesh&&(r.mesh.rotation.y+=r.rotationSpeed)}}if(M&&U&&N&&o>V){nt+=.02;const n=(U.position.x+N.position.x)/2,s=(U.position.y+N.position.y)/2,r=(U.position.z+N.position.z)/2,h=N.position.x-U.position.x,d=N.position.y-U.position.y,m=N.position.z-U.position.z,p=Math.sqrt(h*h+d*d+m*m);M.position.set(n,s,r),M.scale.y=p*.8,M.lookAt(N.position),M.rotateX(Math.PI/2);const b=Math.sin(nt)>0?1:-1,S=Math.sin(nt)*.15;M.position.x+=h*S*b,M.position.z+=m*S*b,M.material.opacity=.4+Math.abs(Math.sin(nt))*.3}v.update(),A.render(w,k)},Et=()=>{t.value&&(k.aspect=t.value.clientWidth/t.value.clientHeight,k.updateProjectionMatrix(),A.setSize(t.value.clientWidth,t.value.clientHeight))},vt=i=>{const o=t.value.getBoundingClientRect(),n=new R((i.clientX-o.left)/o.width*2-1,-((i.clientY-o.top)/o.height)*2+1),s=new re;s.setFromCamera(n,k);const r=Y.map(d=>d.userData.mesh).filter(Boolean),h=s.intersectObjects(r);if(h.length>0){const d=h[0].object,m=Y.find(p=>p.userData.mesh===d);m&&(e.value=m.userData)}else e.value=null},Pt=()=>{if(document.visibilityState==="visible"&&K){let i;do i=Math.floor(Math.random()*it.length);while(i===ot&&it.length>1);ot=i,$=Math.random()*Math.PI*2}};return Wt(()=>{typeof window<"u"&&t.value&&(Bt(),St(),window.addEventListener("resize",Et),document.addEventListener("visibilitychange",Pt),t.value.addEventListener("click",vt))}),Vt(()=>{ut&&cancelAnimationFrame(ut),window.removeEventListener("resize",Et),document.removeEventListener("visibilitychange",Pt),t.value&&t.value.removeEventListener("click",vt),A&&A.dispose()}),(i,o)=>(W(),X("div",Ce,[l.value?(W(),X("div",ke,[...o[1]||(o[1]=[g("div",{class:"text-center"},[g("div",{class:"w-16 h-16 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),g("div",{class:"text-amber-200/80 text-lg tracking-widest font-light"},"探索宇宙中...")],-1)])])):et("",!0),g("div",{ref_key:"containerRef",ref:t,class:"w-full h-full"},null,512),o[3]||(o[3]=qt('<a href="/workshop/" class="absolute top-4 left-4 md:top-6 md:left-6 z-10 flex items-center gap-2 px-3 py-2 rounded-lg bg-black/40 backdrop-blur-sm border border-amber-500/20 text-amber-200/80 hover:text-amber-100 hover:bg-black/60 hover:border-amber-500/40 transition-all duration-300 group" data-v-f8297a9f><svg class="w-5 h-5 transform group-hover:-translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f8297a9f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-f8297a9f></path></svg><span class="text-sm tracking-wide" data-v-f8297a9f>Back</span></a><div class="absolute top-4 right-4 md:top-6 md:right-6 z-10 text-right pointer-events-none" data-v-f8297a9f><div class="text-xl md:text-2xl font-bold text-amber-100/90 tracking-wider drop-shadow-[0_0_20px_rgba(255,170,50,0.3)]" data-v-f8297a9f> OUTER WILDS </div><div class="text-xs md:text-sm text-amber-200/50 mt-1 tracking-wide" data-v-f8297a9f> SOLAR SYSTEM </div></div>',2)),g("div",Le,[g("div",{class:_t(["px-4 py-2 rounded-lg backdrop-blur-sm border transition-all duration-500",[c.value<=20?"bg-blue-900/60 border-blue-400/50 shadow-[0_0_30px_rgba(100,150,255,0.3)]":"bg-black/40 border-amber-500/20"]])},[g("div",{class:_t(["text-2xl md:text-3xl font-mono font-bold tracking-wider transition-colors duration-500",[c.value<=5?"text-white animate-pulse":c.value<=20?"text-blue-300":"text-amber-200"]])},F(Math.floor(c.value/60))+":"+F(String(Math.floor(c.value%60)).padStart(2,"0")),3),c.value<=20?(W(),X("div",{key:0,class:_t(["text-xs mt-1 transition-all duration-300",c.value<=5?"text-white/90":"text-blue-300/80"])},F(c.value<=5?"超新星爆发":"太阳正在膨胀..."),3)):et("",!0)],2)]),dt(Dt,{"enter-active-class":"transition-all duration-500 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:gt(()=>[f.value?(W(),X("div",{key:0,class:"absolute inset-0 z-40 flex items-center justify-center",style:Tt({backgroundColor:`rgba(255, 255, 255, ${Math.min(1,(2-c.value)*.5)})`})},[c.value<=0?(W(),X("div",ze,[o[2]||(o[2]=g("div",{class:"text-3xl md:text-5xl font-bold text-gray-800 mb-4 tracking-widest"}," END OF TIME ",-1)),g("div",je,F(Math.ceil(x.value))+" 秒后重新开始 ",1)])):et("",!0)],4)):et("",!0)]),_:1}),dt(Dt,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 translate-y-4","leave-to-class":"opacity-0 translate-y-4"},{default:gt(()=>[e.value?(W(),X("div",Ne,[g("div",Ie,[g("div",He,[g("div",{class:"w-12 h-12 rounded-full shrink-0 shadow-lg",style:Tt({backgroundColor:"#"+e.value.color.toString(16).padStart(6,"0"),boxShadow:"0 0 20px #"+e.value.color.toString(16).padStart(6,"0")+"60"})},null,4),g("div",Ye,[g("div",Ue,F(e.value.name),1),g("div",Ze,F(e.value.nameEn),1),g("div",Ge,F(e.value.description),1)])]),g("button",{onClick:o[0]||(o[0]=n=>e.value=null),class:"absolute top-3 right-3 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-white transition-colors"}," ✕ ")])])):et("",!0)]),_:1})]))}},Ke=Xt(Be,[["__scopeId","data-v-f8297a9f"]]),Ve=JSON.parse('{"title":"星际拓荒太阳系","description":"","frontmatter":{"layout":"page","navbar":false,"title":"星际拓荒太阳系","music":"https://raw.githubusercontent.com/v-laughing/assets/master/music/Outer-Wilds.mp3"},"headers":[],"relativePath":"workshop/solar-system.md","filePath":"workshop/solar-system.md"}'),Fe={name:"workshop/solar-system.md"},qe=Object.assign(Fe,{setup(a){return(t,e)=>{const l=Qt("ClientOnly");return W(),X("div",null,[dt(l,null,{default:gt(()=>[dt(Ke)]),_:1})])}}});export{Ve as __pageData,qe as default};
